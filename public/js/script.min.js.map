{"version":3,"sources":["script.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","plus","plusApp","formatNr","x","addComma","toString","replace","indexOf","roundNr","d","parseFloat","toFixed","setPath","location","href","match","path","projectName","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toLowerCase","getScale","width","addClass","removeClass","initMediaUrls","each","el","undefined","attr","getData","getJSON","data","municipalities","municipality_id","municipality","push","id","name","name_fi","initAutocomplete","element","easyAutocomplete","getValue","highlightPhrase","list","hideAnimation","callback","time","type","enabled","onKeyEnterEvent","getSelectedItemData","maxNumberOfElements","onSelectItemEvent","showAnimation","placeholder","calculateTax","tax_percent","meta","appendTo","vuositulot","salary","ansiotulot","temp","ylevero","Math","min","tyoelakevakuutusmaksu","tyottomyysvakuutusmaksu","sairausvakuutuksen_paivarahamaksu","valtioveron_alaiset_ansiotulot","ansiotulovahennys","perusvahennys","valtiovero","enimmaistyotulovahennys","valtioveron_alaiset_ansiotulot_max","tyotulovahennys","max","kuntavero","printResults","result_container","show","empty","tax","net_income","tax_lastyear","tax_percent_change","neighbors_container","table_container","tbody_container","neighbors","tr_container","difference","initEvents","window","on","val","text","slideToggle","unmount","off","unbind","mount","init","isInitialized","version","jQuery","easy-autocomplete","2","EasyAutocomplete","scope","Configuration","options","isAssigned","defaults","printPropertiesThatDoesntExist","consol","optionsToCheck","checkPropertiesIfExist","source","target","property","log","inArray","externalObjects","url","dataType","listLocation","xmlElementName","autocompleteOff","ajaxCallback","matchResponseProperty","sort","method","b","hideOnEmptyPhrase","caseSensitive","phrase","search","onClickEvent","onLoadEvent","onChooseEvent","onMouseOverEvent","onMouseOutEvent","onShowListEvent","onHideListEvent","theme","cssClasses","minCharNumber","requestDelay","adjustWidth","ajaxSettings","preparePostData","inputPhrase","loggerEnabled","template","categoriesAssigned","categories","this","get","propertyName","equals","value","checkDataUrlProperties","checkRequiredProperties","logger","error","Array","category","mergeObjects","mergedObject","console","defaultUrl","defaultlistLocation","find","defaultsGetValue","Constans","constants","CONTAINER_CLASS","CONTAINER_ID","WRAPPER_CSS_CLASS","Logger","message","warning","proccess","config","listBuilder","preparedList","ListBuilderService","configuration","proccessResponseData","convertToListBuilder","builder","header","maxListSize","convertXmlToList","simpleList","updateCategories","convertXml","processData","checkIfDataExists","listBuilders","main","$input","$field","prepareField","bindEvents","adjustWrapperWidth","fieldWidth","outerWidth","parent","css","highlight","escapeRegExp","str","escapedPhrase","RegExp","hasClass","consts","next","remove","unwrap","$wrapper","classes","getTemplateClass","wrap","$elements_container","getContainerId","prepend","animationTime","slideDown","fadeIn","slideUp","fadeOut","hide","eq","selectedElement","event","$item","$listContainer","detach","elementsList","counter","builderIndex","listBuildersLength","listData","append","listDataLength","j","itemCounter","elementsValue","trigger","selectElement","mouseover","mouseout","html","build","after","$container","elementId","bindFocusOut","focusout","fieldValue","bindKeyup","keyup","loadData","checkInputPhraseMatchResponse","listBuilderService","loadElements","showContainer","hideContainer","settings","set","ajax","done","fail","always","keyCode","loseFieldFocus","preventDefault","requestDelayTimeoutId","clearTimeout","setTimeout","bindKeydown","evt","suppressKeypress","keydown","bindKeypress","bindFocus","focus","bindBlur","blur","removeAutocomplete","checkParam","index","Template","getConstants","getConfiguration","getContainer","getSelectedItemIndex","getItems","getItemData","eacHandles","getHandle","inputHasId","input","assignRandomId","fieldId","floor","random","setHandle","handle","genericTemplates","basic","cssClass","description","fields","iconLeft","icon","iconRight","iconSrc","links","link","custom","convertTemplateToMethod","buildMethod","_fields","elementValue","emptyStringFunction","_cssClass","fn","$this","eacHandle","inputId"],"mappings":"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","file":"script.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n(function ($) {\n  require('easy-autocomplete');\n  var plus = void 0;\n  var plusApp = {\n    formatNr: function formatNr(x, addComma) {\n      x = x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '&nbsp;');\n      x = x.replace('.', ',');\n      if (addComma === true && x.indexOf(',') === -1) {\n        x = x + ',0';\n      }\n      return x === '' ? 0 : x;\n    },\n    roundNr: function roundNr(x, d) {\n      return parseFloat(x.toFixed(d));\n    },\n    setPath: function setPath() {\n      if (location.href.match('dev')) {\n        plusApp.path = 'http://dev.yle.fi/2017/' + plusApp.projectName + '/public/';\n      } else if (location.href.match('yle.fi/plus')) {\n        plusApp.path = '//yle.fi/plus/yle/2017/' + plusApp.projectName + '/';\n      } else {\n        plusApp.path = '//plus.yle.fi/' + plusApp.projectName + '/';\n      }\n    },\n    capitalizeFirstLetter: function capitalizeFirstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n    },\n    getScale: function getScale() {\n      var width = plus.width();\n      if (width >= 600) {\n        plus.addClass('wide');\n        return true;\n      }\n      if (width < 600) {\n        plus.removeClass('wide');\n        return false;\n      }\n    },\n    initMediaUrls: function initMediaUrls() {\n      $.each($('.handle_img', plus), function (i, el) {\n        $(undefined).attr('src', plusApp.path + 'img/' + $(undefined).attr('data-src'));\n      });\n    },\n    getData: function getData() {\n      $.getJSON(plusApp.path + 'data/data.json', function (data) {\n        plusApp.data = data;\n        plusApp.municipalities = [];\n        $.each(plusApp.data.municipalities, function (municipality_id, municipality) {\n          plusApp.municipalities.push({\n            id: municipality_id,\n            name: municipality.name_fi\n          });\n        });\n        plusApp.initAutocomplete();\n      });\n    },\n    initAutocomplete: function initAutocomplete() {\n      var element = $('.municipality_input_init', plus);\n      element.easyAutocomplete({\n        data: plusApp.municipalities,\n        getValue: 'name',\n        highlightPhrase: true,\n        list: {\n          hideAnimation: {\n            callback: function callback() {},\n            time: 200,\n            type: 'slide'\n          },\n          match: {\n            enabled: true\n          },\n          onKeyEnterEvent: function onKeyEnterEvent() {\n            plusApp.municipality_id = element.getSelectedItemData().id;\n          },\n          maxNumberOfElements: 10,\n          onSelectItemEvent: function onSelectItemEvent() {\n            plusApp.municipality_id = element.getSelectedItemData().id;\n          },\n          showAnimation: {\n            callback: function callback() {},\n            time: 200,\n            type: 'slide'\n          }\n        },\n        placeholder: 'esimerkiksi Tampere'\n      });\n    },\n    calculateTax: function calculateTax(tax_percent) {\n      plusApp.meta = $('<div class=\"meta_container\"></div>');\n      $('<h3>Lasketut vähennykset</h3>').appendTo(plusApp.meta);\n\n      // Vuositulot.\n      var vuositulot = plusApp.salary * 12;\n      $('<div class=\"vuositulot\"><span class=\"label\">Vuositulot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(vuositulot), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var ansiotulot = vuositulot;\n\n      // Tulonhankkimisvähennys\n      var temp = vuositulot > 750 ? 750 : vuositulot;\n      $('<div class=\"deduction\"><span class=\"label\">Tulonhankkimisvähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(temp), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      ansiotulot = vuositulot > 750 ? ansiotulot - temp : ansiotulot - temp;\n\n      // Yle vero.\n      var ylevero = ansiotulot * 0.0068 < 70 ? 0 : Math.min(ansiotulot * 0.0068, 143); // 0.68%\n\n      // Työeläkevakuutusmaksu.\n      var tyoelakevakuutusmaksu = vuositulot * 0.0615; // 6.15%\n      ansiotulot = ansiotulot - tyoelakevakuutusmaksu;\n      $('<div class=\"deduction\"><span class=\"label\">Työeläkevakuutusmaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyoelakevakuutusmaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Työttömyysvakuutusmaksu.\n      var tyottomyysvakuutusmaksu = vuositulot * 0.016; // 1.6%\n      ansiotulot = ansiotulot - tyottomyysvakuutusmaksu;\n      $('<div class=\"deduction\"><span class=\"label\">Työttömyysvakuutusmaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyottomyysvakuutusmaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Sairausvakuutuksen päivärahamaksu.\n      var sairausvakuutuksen_paivarahamaksu = 0;\n      if (vuositulot > 14000) {\n        sairausvakuutuksen_paivarahamaksu = vuositulot * 0.0158; // 1.58%\n        ansiotulot = ansiotulot - sairausvakuutuksen_paivarahamaksu;\n        $('<div class=\"deduction\"><span class=\"label\">Sairausvakuutuksen päivärahamaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(sairausvakuutuksen_paivarahamaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      }\n\n      // Valtion verotuksen alaiset tulot.\n      var valtioveron_alaiset_ansiotulot = ansiotulot;\n      $('<div><span class=\"label\">Valtion verotuksen alaiset tulot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(valtioveron_alaiset_ansiotulot), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Ansiotulovähennys.\n      var ansiotulovahennys = (7230 - 2500) * 0.51 + (vuositulot - 7230) * 0.28;\n      ansiotulovahennys = ansiotulovahennys > 3570 ? 3570 : ansiotulovahennys;\n      ansiotulovahennys = ansiotulovahennys - (vuositulot - 750 - 14000) * 0.045;\n      ansiotulovahennys = ansiotulovahennys < 0 ? 0 : ansiotulovahennys;\n      $('<div class=\"deduction\"><span class=\"label\">Ansiotulovähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ansiotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Perusvähennys.\n      var perusvahennys = 3060 - (ansiotulot - ansiotulovahennys - 3060) * 0.18;\n      perusvahennys = perusvahennys < 0 ? 0 : perusvahennys;\n      $('<div class=\"deduction\"><span class=\"label\">Perusvähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(perusvahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Valtion verot.\n      var valtiovero = 0;\n      if (valtioveron_alaiset_ansiotulot > 73100) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 73100) * 0.3150 + 10174;\n      } else if (valtioveron_alaiset_ansiotulot > 41200) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 41200) * 0.2150 + 3315.50;\n      } else if (valtioveron_alaiset_ansiotulot > 25300) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 25300) * 0.1750 + 533;\n      } else if (valtioveron_alaiset_ansiotulot > 16900) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 16900) * 0.0625 + 8;\n      }\n\n      // Työtulovähennys.\n      var enimmaistyotulovahennys = void 0;\n      if (vuositulot > 33000) {\n        var valtioveron_alaiset_ansiotulot_max = (valtioveron_alaiset_ansiotulot - 2500) * 0.12;\n        valtioveron_alaiset_ansiotulot_max = valtioveron_alaiset_ansiotulot_max > 1420 ? 1420 : valtioveron_alaiset_ansiotulot_max;\n        enimmaistyotulovahennys = valtioveron_alaiset_ansiotulot_max - (vuositulot - 750 - 33000) * 0.0151;\n      } else {\n        enimmaistyotulovahennys = 1420;\n      }\n      $('<div><span class=\"label\">Enimmäisvähennys valtionverotuksessa</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(enimmaistyotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var tyotulovahennys = Math.max(enimmaistyotulovahennys - valtiovero, 0);\n\n      // Valtion verot.\n      valtiovero = Math.max(valtiovero - enimmaistyotulovahennys - tyotulovahennys, 0);\n\n      ansiotulot = ansiotulot - ansiotulovahennys - perusvahennys;\n      $('<div class=\"effective_income\"><span class=\"label\">Kunnallisverotuksessa verotettava tulo</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ansiotulot), 0) + ' € </span></div>').appendTo(plusApp.meta);\n      $('<div class=\"tyotulovahennys\"><span class=\"label\">Kunnallisverosta tehtävä työtulovähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var kuntavero = Math.max(ansiotulot * (tax_percent / 100) - tyotulovahennys, 0);\n      $('<div><span class=\"label\">Kunnallisvero</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(kuntavero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      $('<div><span class=\"label\">Valtion verot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(valtiovero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      $('<div><span class=\"label\">Ylevero</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ylevero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      return tyoelakevakuutusmaksu + tyottomyysvakuutusmaksu + sairausvakuutuksen_paivarahamaksu + kuntavero + valtiovero + ylevero;\n    },\n    printResults: function printResults() {\n      var result_container = $('.result_container', plus).show().empty();\n      var tax = plusApp.calculateTax(plusApp.data.municipalities[plusApp.municipality_id].tax_percent);\n      if (tax < 0) {\n        $('<h3>Et maksa veroja</h3>').appendTo(result_container);\n        $('<p>Tulosi ovat niin alhaiset, että et maksa lainkaan veroja.</p>').appendTo(result_container);\n      } else {\n        var net_income = plusApp.salary * 12 - tax;\n        $('<h3>Maksat tuloveroja ja pakollisia maksuja ' + plusApp.formatNr(plusApp.roundNr(tax, 0)) + ' € vuonna 2017, joten nettovuositulosi on ' + plusApp.formatNr(plusApp.roundNr(net_income, 0)) + ' €, josta maksat kulutusveroa ' + plusApp.formatNr(plusApp.roundNr(net_income * 0.2, 0)) + ' €.</h3>').appendTo(result_container);\n        var tax_lastyear = plusApp.calculateTax(plusApp.data.municipalities[plusApp.municipality_id].tax_percent - plusApp.data.municipalities[plusApp.municipality_id].tax_percent_change);\n        var meta = plusApp.meta;\n        var vuositulot = plusApp.salary * 12;\n        if (tax !== tax_lastyear) {\n          if (tax > tax_lastyear) {\n            $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tax / vuositulot * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>. Vuodelle 2017 ' + plusApp.capitalizeFirstLetter(plusApp.municipality) + ' nosti kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit ' + plusApp.formatNr(plusApp.roundNr(tax_lastyear, 0)) + ' €.</p>').appendTo(result_container);\n          } else {\n            $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tax / vuositulot * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>. Vuodelle 2017 ' + plusApp.capitalizeFirstLetter(plusApp.municipality) + ' laski kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit ' + plusApp.formatNr(plusApp.roundNr(tax_lastyear, 0)) + ' €.</p>').appendTo(result_container);\n          }\n        } else {\n          $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tax / vuositulot * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>.</p>').appendTo(result_container);\n        }\n        if (plusApp.municipality_id === '170') {\n          $('<p>Maksat Suomen alhaisinta kunnallisveroa. Eniten maksaisit Savonlinnassa ja Jämijärvellä, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(22.5), 0)) + ' €.</p>').appendTo(result_container);\n        } else if (plusApp.municipality_id === '740' || plusApp.municipality_id === '181') {\n          $('<p>Maksat Suomen korkeinta kunnallisveroa. Vähiten maksaisit Jomalassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(16.5), 0)) + ' €.</p>').appendTo(result_container);\n        } else {\n          $('<p>Vähiten maksaisit Ahvenanmaalla Jomalassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(16.5), 0)) + ' €. Eniten Jämijärvellä ja Savonlinnassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(22.5), 0)) + ' €.</p>').appendTo(result_container);\n        }\n        // let url = window.location.href;\n        // $('<p>Jaa kunnan veroprosentti <a href=\"https://www.facebook.com/dialog/feed?app_id=147925155254978&display=popup&name=' + encodeURIComponent(plusApp.capitalizeFirstLetter(plusApp.municipality) + ' kunnallisveroprosentti on ' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '. Katso kuntasi tilanne ja laske kunnallisverosi') + '&caption=' + encodeURIComponent('Tarkista oman kuntasi tilanne') + '&link=' + encodeURIComponent(url) + '&redirect_uri=' + url + '\" class=\"\" target=\"_blank\">Facebookissa</a> ja <a href=\"https://twitter.com/share?url=' + encodeURIComponent(url) + '&hashtags=' + encodeURIComponent('kunnallisvero') + '&text=' + encodeURIComponent(plusApp.capitalizeFirstLetter(plusApp.municipality) + ' kunnallisveroprosentti on ' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '. Katso kuntasi tilanne ja laske kunnallisverosi.') + '\" class=\"\" target=\"_blank\">Twitterissä</a>.</p>').appendTo(result_container);\n        $('<div class=\"more_container\"><button class=\"more active\">Näytä vähennykset</button></div>').appendTo(result_container);\n        meta.appendTo(result_container);\n      }\n      var neighbors_container = $('<div class=\"neighbors_container\"></div>').appendTo(result_container);\n      $('<h3>Naapurikunnat</h3>').appendTo(neighbors_container);\n      var table_container = $('<table></table>').appendTo(neighbors_container);\n      $('<thead><tr><th>Kunta</th><th class=\"number\">Vero-%</th><th class=\"number\">€/12 kk</th><th class=\"number\">Erotus</th></tr></thead>').appendTo(table_container);\n      var tbody_container = $('<tbody></tbody>').appendTo(table_container);\n      $.each(plusApp.data.neighbors[plusApp.municipality_id], function (i, el) {\n        var tr_container = $('<tr></tr>').appendTo(tbody_container);\n        if (plusApp.data.municipalities[el]) {\n          $('<td>' + plusApp.data.municipalities[el].name_fi + '</td>').appendTo(tr_container);\n          $('<td class=\"number\">' + plusApp.formatNr(plusApp.data.municipalities[el].tax_percent) + '</td>').appendTo(tr_container);\n          $('<td class=\"number\">' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(plusApp.data.municipalities[el].tax_percent), 0)) + '</td>').appendTo(tr_container);\n          var difference = plusApp.calculateTax(plusApp.data.municipalities[el].tax_percent) - tax;\n          if (difference < 0) {\n            $('<td class=\"number\">' + plusApp.formatNr(plusApp.roundNr(difference, 0)) + ' €</td>').appendTo(tr_container);\n          } else if (difference > 0) {\n            $('<td class=\"number\">+' + plusApp.formatNr(plusApp.roundNr(difference, 0)) + ' €</td>').appendTo(tr_container);\n          } else {\n            $('<td class=\"number\">–</td>').appendTo(tr_container);\n          }\n        }\n      });\n    },\n    initEvents: function initEvents() {\n      $(window).on('resize', plusApp.getScale);\n      plus.on('click', '.input_container .button', function () {\n        plusApp.municipality = $('.municipality_input', plus).val();\n        plusApp.salary = $('.salary_input', plus).val();\n        $.each(plusApp.data.municipalities, function (municipality_id, municipality) {\n          if (municipality.name_fi.toLowerCase() === plusApp.municipality.toLowerCase() && plusApp.salary >= 0) {\n            plusApp.municipality_id = municipality_id;\n            plusApp.printResults();\n            return false;\n          }\n        });\n      });\n      plus.on('click', '.more_container .more', function () {\n        if ($(undefined).text() === 'Näytä tarkemmat tiedot') {\n          $(undefined).text('Piilota vähennykset');\n        } else {\n          $(undefined).text('Näytä vähennykset');\n        }\n        $('.meta_container', plus).slideToggle();\n      });\n    },\n    unmount: function unmount() {\n      $(window).off('resize', plusApp.getScale);\n      if (plus !== undefined) {\n        plus.unbind();\n      }\n      delete window.plusApp[plusApp.projectName];\n    },\n    mount: function mount() {\n      plusApp.init();\n      plusApp.isInitialized = true;\n    },\n    init: function init() {\n      plus = $('.plus-app.plus-app-' + plusApp.projectName);\n      plusApp.setPath();\n      plusApp.getScale();\n      plusApp.initMediaUrls();\n      plusApp.initEvents();\n\n      plusApp.getData();\n    },\n    meta: {\n      version: '1.0.0'\n    }\n  };\n  plusApp.projectName = '2017-10-verolaskuri';\n  if (window.plusApp === undefined) {\n    window.plusApp = {};\n  }\n  if (window.plusApp[plusApp.projectName] === undefined) {\n    window.plusApp[plusApp.projectName] = plusApp;\n    window.plusApp[plusApp.projectName].mount();\n  }\n})(jQuery);\n\n},{\"easy-autocomplete\":2}],2:[function(require,module,exports){\n/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\r\n\r\n/*\r\n * EasyAutocomplete - Configuration \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Configuration = function Configuration(options) {\r\n\t\tvar defaults = {\r\n\t\t\tdata: \"list-required\",\r\n\t\t\turl: \"list-required\",\r\n\t\t\tdataType: \"json\",\r\n\r\n\t\t\tlistLocation: function(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\r\n\t\t\txmlElementName: \"\",\r\n\r\n\t\t\tgetValue: function(element) {\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\r\n\t\t\tautocompleteOff: true,\r\n\r\n\t\t\tplaceholder: false,\r\n\r\n\t\t\tajaxCallback: function() {},\r\n\r\n\t\t\tmatchResponseProperty: false,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\tsort: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tmethod: function(a, b) {\r\n\t\t\t\t\t\ta = defaults.getValue(a);\r\n\t\t\t\t\t\tb = defaults.getValue(b);\r\n\t\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaxNumberOfElements: 6,\r\n\r\n\t\t\t\thideOnEmptyPhrase: true,\r\n\r\n\t\t\t\tmatch: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t\tmethod: function(element, phrase) {\r\n\r\n\t\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshowAnimation: {\r\n\t\t\t\t\ttype: \"normal\", //normal|slide|fade\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\thideAnimation: {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* Events */\r\n\t\t\t\tonClickEvent: function() {},\r\n\t\t\t\tonSelectItemEvent: function() {},\r\n\t\t\t\tonLoadEvent: function() {},\r\n\t\t\t\tonChooseEvent: function() {},\r\n\t\t\t\tonKeyEnterEvent: function() {},\r\n\t\t\t\tonMouseOverEvent: function() {},\r\n\t\t\t\tonMouseOutEvent: function() {},\t\r\n\t\t\t\tonShowListEvent: function() {},\r\n\t\t\t\tonHideListEvent: function() {}\r\n\t\t\t},\r\n\r\n\t\t\thighlightPhrase: true,\r\n\r\n\t\t\ttheme: \"\",\r\n\r\n\t\t\tcssClasses: \"\",\r\n\r\n\t\t\tminCharNumber: 0,\r\n\r\n\t\t\trequestDelay: 0,\r\n\r\n\t\t\tadjustWidth: true,\r\n\r\n\t\t\tajaxSettings: {},\r\n\r\n\t\t\tpreparePostData: function(data, inputPhrase) {return data;},\r\n\r\n\t\t\tloggerEnabled: true,\r\n\r\n\t\t\ttemplate: \"\",\r\n\r\n\t\t\tcategoriesAssigned: false,\r\n\r\n\t\t\tcategories: [{\r\n\t\t\t\tmaxNumberOfElements: 4\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t\t\r\n\t\tvar externalObjects = [\"ajaxSettings\", \"template\"];\r\n\r\n\t\tthis.get = function(propertyName) {\r\n\t\t\treturn defaults[propertyName];\r\n\t\t};\r\n\r\n\t\tthis.equals = function(name, value) {\r\n\t\t\tif (isAssigned(name)) {\r\n\t\t\t\tif (defaults[name] === value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthis.checkDataUrlProperties = function() {\r\n\t\t\tif (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tthis.checkRequiredProperties = function() {\r\n\t\t\tfor (var propertyName in defaults) {\r\n\t\t\t\tif (defaults[propertyName] === \"required\") {\r\n\t\t\t\t\tlogger.error(\"Option \" + propertyName + \" must be defined\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tthis.printPropertiesThatDoesntExist = function(consol, optionsToCheck) {\r\n\t\t\tprintPropertiesThatDoesntExist(consol, optionsToCheck);\r\n\t\t};\r\n\r\n\r\n\t\tprepareDefaults();\r\n\r\n\t\tmergeOptions();\r\n\r\n\t\tif (defaults.loggerEnabled === true) {\r\n\t\t\tprintPropertiesThatDoesntExist(console, options);\t\r\n\t\t}\r\n\r\n\t\taddAjaxSettings();\r\n\r\n\t\tprocessAfterMerge();\r\n\t\tfunction prepareDefaults() {\r\n\r\n\t\t\tif (options.dataType === \"xml\") {\r\n\t\t\t\t\r\n\t\t\t\tif (!options.getValue) {\r\n\r\n\t\t\t\t\toptions.getValue = function(element) {\r\n\t\t\t\t\t\treturn $(element).text();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (!options.list) {\r\n\r\n\t\t\t\t\toptions.list = {};\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (!options.list.sort) {\r\n\t\t\t\t\toptions.list.sort = {};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\toptions.list.sort.method = function(a, b) {\r\n\t\t\t\t\ta = options.getValue(a);\r\n\t\t\t\t\tb = options.getValue(b);\r\n\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (!options.list.match) {\r\n\t\t\t\t\toptions.list.match = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.list.match.method = function(element, phrase) {\r\n\r\n\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t\tif (options.categories !== undefined && options.categories instanceof Array) {\r\n\r\n\t\t\t\tvar categories = [];\r\n\r\n\t\t\t\tfor (var i = 0, length = options.categories.length; i < length; i += 1) { \r\n\r\n\t\t\t\t\tvar category = options.categories[i];\r\n\r\n\t\t\t\t\tfor (var property in defaults.categories[0]) {\r\n\r\n\t\t\t\t\t\tif (category[property] === undefined) {\r\n\t\t\t\t\t\t\tcategory[property] = defaults.categories[0][property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.categories = categories;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mergeOptions() {\r\n\r\n\t\t\tdefaults = mergeObjects(defaults, options);\r\n\r\n\t\t\tfunction mergeObjects(source, target) {\r\n\t\t\t\tvar mergedObject = source || {};\r\n\r\n\t\t\t\tfor (var propertyName in source) {\r\n\t\t\t\t\tif (target[propertyName] !== undefined && target[propertyName] !== null) {\r\n\r\n\t\t\t\t\t\tif (typeof target[propertyName] !== \"object\" || \r\n\t\t\t\t\t\t\t\ttarget[propertyName] instanceof Array) {\r\n\t\t\t\t\t\t\tmergedObject[propertyName] = target[propertyName];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeObjects(source[propertyName], target[propertyName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t/* If data is an object */\r\n\t\t\t\tif (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\r\n\t\t\t\t\tmergedObject.data = target.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mergedObject;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\r\n\t\tfunction processAfterMerge() {\r\n\t\t\t\r\n\t\t\tif (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.url;\r\n\t\t\t\tdefaults.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.ajaxSettings.url;\r\n\t\t\t\tdefaults.ajaxSettings.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.listLocation === \"string\") {\r\n\t\t\t\tvar defaultlistLocation = defaults.listLocation;\r\n\r\n\t\t\t\tif (defaults.dataType.toUpperCase() === \"XML\") {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn $(data).find(defaultlistLocation);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn data[defaultlistLocation];\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.getValue === \"string\") {\r\n\t\t\t\tvar defaultsGetValue = defaults.getValue;\r\n\t\t\t\tdefaults.getValue = function(element) {\r\n\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (options.categories !== undefined) {\r\n\t\t\t\tdefaults.categoriesAssigned = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addAjaxSettings() {\r\n\r\n\t\t\tif (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\r\n\t\t\t\tdefaults.ajaxSettings = options.ajaxSettings;\r\n\t\t\t} else {\r\n\t\t\t\tdefaults.ajaxSettings = {};\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction isAssigned(name) {\r\n\t\t\tif (defaults[name] !== undefined && defaults[name] !== null) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction printPropertiesThatDoesntExist(consol, optionsToCheck) {\r\n\t\t\t\r\n\t\t\tcheckPropertiesIfExist(defaults, optionsToCheck);\r\n\r\n\t\t\tfunction checkPropertiesIfExist(source, target) {\r\n\t\t\t\tfor(var property in target) {\r\n\t\t\t\t\tif (source[property] === undefined) {\r\n\t\t\t\t\t\tconsol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\r\n\t\t\t\t\t\tcheckPropertiesIfExist(source[property], target[property]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Logger \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\t\r\n\tscope.Logger = function Logger() {\r\n\r\n\t\tthis.error = function(message) {\r\n\t\t\tconsole.log(\"ERROR: \" + message);\r\n\t\t};\r\n\r\n\t\tthis.warning = function(message) {\r\n\t\t\tconsole.log(\"WARNING: \" + message);\r\n\t\t};\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\t\r\n\r\n/*\r\n * EasyAutocomplete - Constans\r\n */\r\nvar EasyAutocomplete = (function(scope){\t\r\n\t\r\n\tscope.Constans = function Constans() {\r\n\t\tvar constants = {\r\n\t\t\tCONTAINER_CLASS: \"easy-autocomplete-container\",\r\n\t\t\tCONTAINER_ID: \"eac-container-\",\r\n\r\n\t\t\tWRAPPER_CSS_CLASS: \"easy-autocomplete\"\r\n\t\t};\r\n\r\n\t\tthis.getValue = function(propertyName) {\r\n\t\t\treturn constants[propertyName];\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\r\n\r\n\r\n\t\tthis.init = function(data) {\r\n\t\t\tvar listBuilder = [],\r\n\t\t\t\tbuilder = {};\r\n\r\n\t\t\tbuilder.data = configuration.get(\"listLocation\")(data);\r\n\t\t\tbuilder.getValue = configuration.get(\"getValue\");\r\n\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\r\n\t\t\t\t\r\n\t\t\tlistBuilder.push(builder);\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.updateCategories = function(listBuilder, data) {\r\n\t\t\t\r\n\t\t\tif (configuration.get(\"categoriesAssigned\")) {\r\n\r\n\t\t\t\tlistBuilder = [];\r\n\r\n\t\t\t\tfor(var i = 0; i < configuration.get(\"categories\").length; i += 1) {\r\n\r\n\t\t\t\t\tvar builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\r\n\r\n\t\t\t\t\tlistBuilder.push(builder);\r\n\t\t\t\t}\r\n\r\n\t\t\t} \r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.convertXml = function(listBuilder) {\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tfor(var i = 0; i < listBuilder.length; i += 1) {\r\n\t\t\t\t\tlistBuilder[i].data = convertXmlToList(listBuilder[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.processData = function(listBuilder, inputPhrase) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilder.length; i < length; i+=1) {\r\n\t\t\t\tlistBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.checkIfDataExists = function(listBuilders) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilders.length; i < length; i += 1) {\r\n\r\n\t\t\t\tif (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\r\n\t\t\t\t\tif (listBuilders[i].data.length > 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tfunction convertToListBuilder(category, data) {\r\n\r\n\t\t\tvar builder = {};\r\n\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tbuilder = convertXmlToListBuilder();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuilder = convertDataToListBuilder();\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (category.header !== undefined) {\r\n\t\t\t\tbuilder.header = category.header;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.maxNumberOfElements !== undefined) {\r\n\t\t\t\tbuilder.maxNumberOfElements = category.maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (configuration.get(\"list\").maxNumberOfElements !== undefined) {\r\n\r\n\t\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.getValue !== undefined) {\r\n\r\n\t\t\t\tif (typeof category.getValue === \"string\") {\r\n\t\t\t\t\tvar defaultsGetValue = category.getValue;\r\n\t\t\t\t\tbuilder.getValue = function(element) {\r\n\t\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (typeof category.getValue === \"function\") {\r\n\t\t\t\t\tbuilder.getValue = category.getValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tbuilder.getValue = configuration.get(\"getValue\");\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn builder;\r\n\r\n\r\n\t\t\tfunction convertXmlToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {},\r\n\t\t\t\t\tlistLocation;\r\n\r\n\t\t\t\tif (category.xmlElementName !== undefined) {\r\n\t\t\t\t\tbuilder.xmlElementName = category.xmlElementName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = category.listLocation;\r\n\t\t\t\t} else if (configuration.get(\"listLocation\") !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = configuration.get(\"listLocation\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (listLocation !== undefined) {\r\n\t\t\t\t\tif (typeof listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = $(data).find(listLocation);\r\n\t\t\t\t\t} else if (typeof listLocation === \"function\") {\r\n\r\n\t\t\t\t\t\tbuilder.data = listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction convertDataToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {};\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tif (typeof category.listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = data[category.listLocation];\r\n\t\t\t\t\t} else if (typeof category.listLocation === \"function\") {\r\n\t\t\t\t\t\tbuilder.data = category.listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction convertXmlToList(builder) {\r\n\t\t\tvar simpleList = [];\r\n\r\n\t\t\tif (builder.xmlElementName === undefined) {\r\n\t\t\t\tbuilder.xmlElementName = configuration.get(\"xmlElementName\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$(builder.data).find(builder.xmlElementName).each(function() {\r\n\t\t\t\tsimpleList.push(this);\r\n\t\t\t});\r\n\r\n\t\t\treturn simpleList;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.proccess = function proccessData(config, listBuilder, phrase) {\r\n\r\n\t\tscope.proccess.match = match;\r\n\r\n\t\tvar list = listBuilder.data,\r\n\t\t\tinputPhrase = phrase;//TODO REFACTOR\r\n\r\n\t\tlist = findMatch(list, inputPhrase);\r\n\t\tlist = reduceElementsInList(list);\r\n\t\tlist = sort(list);\r\n\r\n\t\treturn list;\r\n\r\n\r\n\t\tfunction findMatch(list, phrase) {\r\n\t\t\tvar preparedList = [],\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tif (config.get(\"list\").match.enabled) {\r\n\r\n\t\t\t\tfor(var i = 0, length = list.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\tvalue = config.get(\"getValue\")(list[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (match(value, phrase)) {\r\n\t\t\t\t\t\tpreparedList.push(list[i]);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tpreparedList = list;\r\n\t\t\t}\r\n\r\n\t\t\treturn preparedList;\r\n\t\t}\r\n\r\n\t\tfunction match(value, phrase) {\r\n\r\n\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\r\n\t\t\t\tif (typeof value === \"string\") {\r\n\t\t\t\t\tvalue = value.toLowerCase();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (config.get(\"list\").match.method(value, phrase)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction reduceElementsInList(list) {\r\n\t\t\tif (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\r\n\t\t\t\tlist = list.slice(0, listBuilder.maxNumberOfElements);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tfunction sort(list) {\r\n\t\t\tif (config.get(\"list\").sort.enabled) {\r\n\t\t\t\tlist.sort(config.get(\"list\").sort.method);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Template = function Template(options) {\r\n\r\n\r\n\t\tvar genericTemplates = {\r\n\t\t\tbasic: {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\tmethod: function(element) { return element; },\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\ttype: \"description\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tdescription: \"description\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\treturn element + \" - description\"; },\r\n\t\t\t\tcssClass: \"eac-description\"\r\n\t\t\t},\r\n\t\t\ticonLeft: {\r\n\t\t\t\ttype: \"iconLeft\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticon: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-left\"\r\n\t\t\t},\r\n\t\t\ticonRight: {\r\n\t\t\t\ttype: \"iconRight\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticonSrc: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-right\"\r\n\t\t\t},\r\n\t\t\tlinks: {\r\n\t\t\t\ttype: \"links\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tlink: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tcustom: {\r\n\t\t\t\ttype: \"custom\",\r\n\t\t\t\tmethod: function() {},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/*\r\n\t\t * Converts method with {{text}} to function\r\n\t\t */\r\n\t\tconvertTemplateToMethod = function(template) {\r\n\r\n\r\n\t\t\tvar _fields = template.fields,\r\n\t\t\t\tbuildMethod;\r\n\r\n\t\t\tif (template.type === \"description\") {\r\n\r\n\t\t\t\tbuildMethod = genericTemplates.description.method; \r\n\r\n\t\t\t\tif (typeof _fields.description === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.description === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif (template.type === \"iconRight\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" ;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" ;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"iconLeft\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif(template.type === \"links\") {\r\n\r\n\t\t\t\tif (typeof _fields.link === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.link === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"custom\") {\r\n\r\n\t\t\t\treturn template.method;\r\n\t\t\t}\r\n\r\n\t\t\treturn genericTemplates.basic.method;\r\n\r\n\t\t},\r\n\r\n\r\n\t\tprepareBuildMethod = function(options) {\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\r\n\t\t\t\treturn convertTemplateToMethod(options);\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ttemplateClass = function(options) {\r\n\t\t\tvar emptyStringFunction = function() {return \"\";};\r\n\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\t\t\t\treturn (function () { \r\n\t\t\t\t\tvar _cssClass = genericTemplates[options.type].cssClass;\r\n\t\t\t\t\treturn function() { return _cssClass;};\r\n\t\t\t\t})();\r\n\t\t\t} else {\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getTemplateClass = templateClass(options);\r\n\r\n\t\tthis.build = prepareBuildMethod(options);\r\n\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\t\r\n\tscope.main = function Core($input, options) {\r\n\t\t\t\t\r\n\t\tvar module = {\r\n\t\t\t\tname: \"EasyAutocomplete\",\r\n\t\t\t\tshortcut: \"eac\"\r\n\t\t\t};\r\n\r\n\t\tvar consts = new scope.Constans(),\r\n\t\t\tconfig = new scope.Configuration(options),\r\n\t\t\tlogger = new scope.Logger(),\r\n\t\t\ttemplate = new scope.Template(options.template),\r\n\t\t\tlistBuilderService = new scope.ListBuilderService(config, scope.proccess),\r\n\t\t\tcheckParam = config.equals,\r\n\r\n\t\t\t$field = $input, \r\n\t\t\t$container = \"\",\r\n\t\t\telementsList = [],\r\n\t\t\tselectedElement = -1,\r\n\t\t\trequestDelayTimeoutId;\r\n\r\n\t\tscope.consts = consts;\r\n\r\n\t\tthis.getConstants = function() {\r\n\t\t\treturn consts;\r\n\t\t};\r\n\r\n\t\tthis.getConfiguration = function() {\r\n\t\t\treturn config;\r\n\t\t};\r\n\r\n\t\tthis.getContainer = function() {\r\n\t\t\treturn $container;\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemIndex = function() {\r\n\t\t\treturn selectedElement;\r\n\t\t};\r\n\r\n\t\tthis.getItems = function () {\r\n\t\t\treturn elementsList;\r\n\t\t};\r\n\r\n\t\tthis.getItemData = function(index) {\r\n\r\n\t\t\tif (elementsList.length < index || elementsList[index] === undefined) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn elementsList[index];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemData = function() {\r\n\t\t\treturn this.getItemData(selectedElement);\r\n\t\t};\r\n\r\n\t\tthis.build = function() {\r\n\t\t\tprepareField();\r\n\t\t};\r\n\r\n\t\tthis.init = function() {\r\n\t\t\tinit();\r\n\t\t};\r\n\t\tfunction init() {\r\n\r\n\t\t\tif ($field.length === 0) {\r\n\t\t\t\tlogger.error(\"Input field doesn't exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkDataUrlProperties()) {\r\n\t\t\t\tlogger.error(\"One of options variables 'data' or 'url' must be defined.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkRequiredProperties()) {\r\n\t\t\t\tlogger.error(\"Will not work without mentioned properties.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tprepareField();\r\n\t\t\tbindEvents();\t\r\n\r\n\t\t}\r\n\t\tfunction prepareField() {\r\n\r\n\t\t\t\t\r\n\t\t\tif ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\r\n\t\t\t\tremoveContainer();\r\n\t\t\t\tremoveWrapper();\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tcreateWrapper();\r\n\t\t\tcreateContainer();\t\r\n\r\n\t\t\t$container = $(\"#\" + getContainerId());\r\n\t\t\tif (config.get(\"placeholder\")) {\r\n\t\t\t\t$field.attr(\"placeholder\", config.get(\"placeholder\"));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction createWrapper() {\r\n\t\t\t\tvar $wrapper = $(\"<div>\"),\r\n\t\t\t\t\tclasses = consts.getValue(\"WRAPPER_CSS_CLASS\");\r\n\r\n\t\t\t\r\n\t\t\t\tif (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\r\n\t\t\t\t\tclasses += \" eac-\" + config.get(\"theme\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + config.get(\"cssClasses\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (template.getTemplateClass() !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + template.getTemplateClass();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.addClass(classes);\r\n\t\t\t\t$field.wrap($wrapper);\r\n\r\n\r\n\t\t\t\tif (config.get(\"adjustWidth\") === true) {\r\n\t\t\t\t\tadjustWrapperWidth();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction adjustWrapperWidth() {\r\n\t\t\t\tvar fieldWidth = $field.outerWidth();\r\n\r\n\t\t\t\t$field.parent().css(\"width\", fieldWidth);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeWrapper() {\r\n\t\t\t\t$field.unwrap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction createContainer() {\r\n\t\t\t\tvar $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\r\n\r\n\t\t\t\t$elements_container\r\n\t\t\t\t\t\t.attr(\"id\", getContainerId())\r\n\t\t\t\t\t\t.prepend($(\"<ul>\"));\r\n\r\n\r\n\t\t\t\t(function() {\r\n\r\n\t\t\t\t\t$elements_container\r\n\t\t\t\t\t\t/* List show animation */\r\n\t\t\t\t\t\t.on(\"show.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").showAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideDown(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeIn(animationTime), callback;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").show();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onShowListEvent();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* List hide animation */\r\n\t\t\t\t\t\t.on(\"hide.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").hideAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideUp(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeOut(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onHideListEvent();\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"selectElement.eac\", function() {\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").removeClass(\"selected\");\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onSelectItemEvent();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"loadElements.eac\", function(event, listBuilders, phrase) {\r\n\t\t\t\r\n\r\n\t\t\t\t\t\t\tvar $item = \"\",\r\n\t\t\t\t\t\t\t\t$listContainer = $elements_container.find(\"ul\");\r\n\r\n\t\t\t\t\t\t\t$listContainer\r\n\t\t\t\t\t\t\t\t.empty()\r\n\t\t\t\t\t\t\t\t.detach();\r\n\r\n\t\t\t\t\t\t\telementsList = [];\r\n\t\t\t\t\t\t\tvar counter = 0;\r\n\t\t\t\t\t\t\tfor(var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar listData = listBuilders[builderIndex].data;\r\n\r\n\t\t\t\t\t\t\t\tif (listData.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\r\n\t\t\t\t\t\t\t\t\t$listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\r\n\t\t\t\t\t\t\t\t\t$item = $(\"<li><div class='eac-item'></div></li>\");\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar j = i,\r\n\t\t\t\t\t\t\t\t\t\t\titemCounter = counter,\r\n\t\t\t\t\t\t\t\t\t\t\telementsValue = listBuilders[builderIndex].getValue(listData[j]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t$item.find(\" > div\")\r\n\t\t\t\t\t\t\t\t\t\t\t.on(\"click\", function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$field.val(elementsValue).trigger(\"change\");\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onClickEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseover(function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOverEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOutEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.html(template.build(highlight(elementsValue, phrase), listData[j]));\r\n\t\t\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\t\t\t$listContainer.append($item);\r\n\t\t\t\t\t\t\t\t\telementsList.push(listData[i]);\r\n\t\t\t\t\t\t\t\t\tcounter += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elements_container.append($listContainer);\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onLoadEvent();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})();\r\n\r\n\t\t\t\t$field.after($elements_container);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeContainer() {\r\n\t\t\t\t$field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction highlight(string, phrase) {\r\n\r\n\t\t\t\tif(config.get(\"highlightPhrase\") && phrase !== \"\") {\r\n\t\t\t\t\treturn highlightPhrase(string, phrase);\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn string;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction escapeRegExp(str) {\r\n\t\t\t\treturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n \t\t\t}\r\n\r\n\t\t\tfunction highlightPhrase(string, phrase) {\r\n\t\t\t\tvar escapedPhrase = escapeRegExp(phrase);\r\n\t\t\t\treturn (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\") , \"<b>$1</b>\");\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t\tfunction getContainerId() {\r\n\t\t\t\r\n\t\t\tvar elementId = $field.attr(\"id\");\r\n\r\n\t\t\telementId = consts.getValue(\"CONTAINER_ID\") + elementId;\r\n\r\n\t\t\treturn elementId;\r\n\t\t}\r\n\t\tfunction bindEvents() {\r\n\r\n\t\t\tbindAllEvents();\r\n\t\t\t\r\n\r\n\t\t\tfunction bindAllEvents() {\r\n\t\t\t\tif (checkParam(\"autocompleteOff\", true)) {\r\n\t\t\t\t\tremoveAutocomplete();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbindFocusOut();\r\n\t\t\t\tbindKeyup();\r\n\t\t\t\tbindKeydown();\r\n\t\t\t\tbindKeypress();\r\n\t\t\t\tbindFocus();\r\n\t\t\t\tbindBlur();\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocusOut() {\r\n\t\t\t\t$field.focusout(function () {\r\n\r\n\t\t\t\t\tvar fieldValue = $field.val(),\r\n\t\t\t\t\t\tphrase;\r\n\r\n\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\tfieldValue = fieldValue.toLowerCase();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0, length = elementsList.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\t\tphrase = config.get(\"getValue\")(elementsList[i]);\r\n\t\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (phrase === fieldValue) {\r\n\t\t\t\t\t\t\tselectedElement = i;\r\n\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeyup() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keyup\")\r\n\t\t\t\t.keyup(function(event) {\r\n\r\n\t\t\t\t\tswitch(event.keyCode) {\r\n\r\n\t\t\t\t\t\tcase 27:\r\n\r\n\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\tloseFieldFocus();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 38:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement > 0) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement -= 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 40:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement < elementsList.length - 1) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement += 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif (event.keyCode > 40 || event.keyCode === 8) {\r\n\r\n\t\t\t\t\t\t\t\tvar inputPhrase = $field.val();\r\n\r\n\t\t\t\t\t\t\t\tif (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (config.get(\"requestDelay\") > 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (requestDelayTimeoutId !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearTimeout(requestDelayTimeoutId);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trequestDelayTimeoutId = setTimeout(function () { loadData(inputPhrase);}, config.get(\"requestDelay\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tloadData(inputPhrase);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tfunction loadData(inputPhrase) {\r\n\r\n\r\n\t\t\t\t\t\tif (inputPhrase.length < config.get(\"minCharNumber\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (config.get(\"data\") !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tvar data = config.get(\"data\");\r\n\r\n\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tif ($field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = createAjaxSettings();\r\n\r\n\t\t\t\t\t\tif (settings.url === undefined || settings.url === \"\") {\r\n\t\t\t\t\t\t\tsettings.url = config.get(\"url\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (settings.dataType === undefined || settings.dataType === \"\") {\r\n\t\t\t\t\t\t\tsettings.dataType = config.get(\"dataType\");\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (settings.url !== undefined && settings.url !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tsettings.url = settings.url(inputPhrase);\r\n\r\n\t\t\t\t\t\t\tsettings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t$.ajax(settings) \r\n\t\t\t\t\t\t\t\t.done(function(data) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.convertXml(listBuilders);\r\n\t\t\t\t\t\t\t\t\tif (checkInputPhraseMatchResponse(inputPhrase, data)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconfig.get(\"ajaxCallback\")();\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.fail(function() {\r\n\t\t\t\t\t\t\t\t\tlogger.warning(\"Fail to load response data\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.always(function() {\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tfunction createAjaxSettings() {\r\n\r\n\t\t\t\t\t\t\tvar settings = {},\r\n\t\t\t\t\t\t\t\tajaxSettings = config.get(\"ajaxSettings\") || {};\r\n\r\n\t\t\t\t\t\t\tfor (var set in ajaxSettings) {\r\n\t\t\t\t\t\t\t\tsettings[set] = ajaxSettings[set];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn settings;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction checkInputPhraseMatchResponse(inputPhrase, data) {\r\n\r\n\t\t\t\t\t\t\tif (config.get(\"matchResponseProperty\") !== false) {\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"string\") {\r\n\t\t\t\t\t\t\t\t\treturn (data[config.get(\"matchResponseProperty\")] === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"function\") {\r\n\t\t\t\t\t\t\t\t\treturn (config.get(\"matchResponseProperty\")(data) === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeydown() {\r\n\t\t\t\t$field\r\n\t\t\t\t\t.on(\"keydown\", function(evt) {\r\n\t        \t\t    evt = evt || window.event;\r\n\t        \t\t    var keyCode = evt.keyCode;\r\n\t        \t\t    if (keyCode === 38) {\r\n\t        \t\t        suppressKeypress = true; \r\n\t        \t\t        return false;\r\n\t        \t\t    }\r\n\t\t        \t})\r\n\t\t\t\t\t.keydown(function(event) {\r\n\r\n\t\t\t\t\t\tif (event.keyCode === 13 && selectedElement > -1) {\r\n\r\n\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onKeyEnterEvent();\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\r\n\t\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\t\thideContainer();\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeypress() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keypress\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocus() {\r\n\t\t\t\t$field.focus(function() {\r\n\r\n\t\t\t\t\tif ($field.val() !== \"\" && elementsList.length > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindBlur() {\r\n\t\t\t\t$field.blur(function() {\r\n\t\t\t\t\tsetTimeout(function() { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAutocomplete() {\r\n\t\t\t\t$field.attr(\"autocomplete\",\"off\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction showContainer() {\r\n\t\t\t$container.trigger(\"show.eac\");\r\n\t\t}\r\n\r\n\t\tfunction hideContainer() {\r\n\t\t\t$container.trigger(\"hide.eac\");\r\n\t\t}\r\n\r\n\t\tfunction selectElement(index) {\r\n\t\t\t\r\n\t\t\t$container.trigger(\"selectElement.eac\", index);\r\n\t\t}\r\n\r\n\t\tfunction loadElements(list, phrase) {\r\n\t\t\t$container.trigger(\"loadElements.eac\", [list, phrase]);\r\n\t\t}\r\n\r\n\t\tfunction loseFieldFocus() {\r\n\t\t\t$field.trigger(\"blur\");\r\n\t\t}\r\n\r\n\r\n\t};\r\n\tscope.eacHandles = [];\r\n\r\n\tscope.getHandle = function(id) {\r\n\t\treturn scope.eacHandles[id];\r\n\t};\r\n\r\n\tscope.inputHasId = function(input) {\r\n\r\n\t\tif($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscope.assignRandomId = function(input) {\r\n\r\n\t\tvar fieldId = \"\";\r\n\r\n\t\tdo {\r\n\t\t\tfieldId = \"eac-\" + Math.floor(Math.random() * 10000);\t\t\r\n\t\t} while ($(\"#\" + fieldId).length !== 0);\r\n\t\t\r\n\t\telementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\r\n\r\n\t\t$(input).attr(\"id\", fieldId);\r\n \r\n\t};\r\n\r\n\tscope.setHandle = function(handle, id) {\r\n\t\tscope.eacHandles[id] = handle;\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n(function($) {\r\n\r\n\t$.fn.easyAutocomplete = function(options) {\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\teacHandle = new EasyAutocomplete.main($this, options);\r\n\r\n\t\t\tif (!EasyAutocomplete.inputHasId($this)) {\r\n\t\t\t\tEasyAutocomplete.assignRandomId($this);\r\n\t\t\t}\r\n\r\n\t\t\teacHandle.init();\r\n\r\n\t\t\tEasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.getSelectedItemIndex = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItems = function () {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItems();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItemData = function(index) {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined && index > -1) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItemData(index);\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getSelectedItemData = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemData();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n})(jQuery);\r\n\n},{}]},{},[1]);\n"]}