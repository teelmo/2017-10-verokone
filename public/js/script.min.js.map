{"version":3,"sources":["script.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","plus","plusApp","formatNr","x","addComma","toString","replace","indexOf","roundNr","d","parseFloat","toFixed","setPath","location","href","match","path","projectName","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toLowerCase","getScale","width","addClass","removeClass","initMediaUrls","each","el","undefined","attr","getData","getJSON","data","municipalities","municipality_id","municipality","push","id","name","name_fi","initAutocomplete","element","easyAutocomplete","getValue","highlightPhrase","list","hideAnimation","callback","time","type","enabled","onKeyEnterEvent","getSelectedItemData","maxNumberOfElements","onSelectItemEvent","showAnimation","placeholder","calculateTax","tax_percent","meta","appendTo","vuositulot","salary","ansiotulot","temp","ylevero","Math","min","tyoelakevakuutusmaksu","is","tyottomyysvakuutusmaksu","sairausvakuutuksen_paivarahamaksu","valtioveron_alaiset_ansiotulot","ansiotulovahennys","perusvahennys","valtiovero","enimmaistyotulovahennys","valtioveron_alaiset_ansiotulot_max","max","tyotulovahennys","kuntavero","printResults","result_container","empty","show","tax","net_income","total_tax","tax_percent_change","spendings_container","spending_categories","spending_category","spending_category_container","title","share","spending_sub_category_container","subcategories","j","category","neighbors_container","table_container","tbody_container","neighbors","tr_container","difference","initEvents","window","on","val","event","currentTarget","text","slideToggle","unmount","off","unbind","mount","init","isInitialized","version","jQuery","easy-autocomplete","2","EasyAutocomplete","scope","Configuration","options","isAssigned","defaults","printPropertiesThatDoesntExist","consol","optionsToCheck","checkPropertiesIfExist","source","target","property","log","inArray","externalObjects","url","dataType","listLocation","xmlElementName","autocompleteOff","ajaxCallback","matchResponseProperty","sort","method","b","hideOnEmptyPhrase","caseSensitive","phrase","search","onClickEvent","onLoadEvent","onChooseEvent","onMouseOverEvent","onMouseOutEvent","onShowListEvent","onHideListEvent","theme","cssClasses","minCharNumber","requestDelay","adjustWidth","ajaxSettings","preparePostData","inputPhrase","loggerEnabled","template","categoriesAssigned","categories","this","get","propertyName","equals","value","checkDataUrlProperties","checkRequiredProperties","logger","error","Array","mergeObjects","mergedObject","console","defaultUrl","defaultlistLocation","find","defaultsGetValue","Constans","constants","CONTAINER_CLASS","CONTAINER_ID","WRAPPER_CSS_CLASS","Logger","message","warning","proccess","config","listBuilder","preparedList","ListBuilderService","configuration","proccessResponseData","convertToListBuilder","builder","header","maxListSize","convertXmlToList","simpleList","updateCategories","convertXml","processData","checkIfDataExists","listBuilders","main","$input","$field","prepareField","bindEvents","adjustWrapperWidth","fieldWidth","outerWidth","parent","css","highlight","escapeRegExp","str","escapedPhrase","RegExp","hasClass","consts","next","remove","unwrap","$wrapper","classes","getTemplateClass","wrap","$elements_container","getContainerId","prepend","animationTime","slideDown","fadeIn","slideUp","fadeOut","hide","eq","selectedElement","$item","$listContainer","detach","elementsList","counter","builderIndex","listBuildersLength","listData","append","listDataLength","itemCounter","elementsValue","trigger","selectElement","mouseover","mouseout","html","build","after","$container","elementId","bindFocusOut","focusout","fieldValue","bindKeyup","keyup","loadData","checkInputPhraseMatchResponse","listBuilderService","loadElements","showContainer","hideContainer","settings","set","ajax","done","fail","always","keyCode","loseFieldFocus","preventDefault","requestDelayTimeoutId","clearTimeout","setTimeout","bindKeydown","evt","suppressKeypress","keydown","bindKeypress","bindFocus","focus","bindBlur","blur","removeAutocomplete","checkParam","index","Template","getConstants","getConfiguration","getContainer","getSelectedItemIndex","getItems","getItemData","eacHandles","getHandle","inputHasId","input","assignRandomId","fieldId","floor","random","setHandle","handle","genericTemplates","basic","cssClass","description","fields","iconLeft","icon","iconRight","iconSrc","links","link","custom","convertTemplateToMethod","buildMethod","_fields","elementValue","emptyStringFunction","_cssClass","fn","$this","eacHandle","inputId"],"mappings":"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","file":"script.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n(function ($) {\n  require('easy-autocomplete');\n  var plus = void 0;\n  var plusApp = {\n    formatNr: function formatNr(x, addComma) {\n      x = x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '&nbsp;');\n      x = x.replace('.', ',');\n      if (addComma === true && x.indexOf(',') === -1) {\n        x = x + ',0';\n      }\n      return x === '' ? 0 : x;\n    },\n    roundNr: function roundNr(x, d) {\n      return parseFloat(x.toFixed(d));\n    },\n    setPath: function setPath() {\n      if (location.href.match('dev')) {\n        plusApp.path = 'http://dev.yle.fi/2017/' + plusApp.projectName + '/public/';\n      } else if (location.href.match('yle.fi/plus')) {\n        plusApp.path = '//yle.fi/plus/yle/2017/' + plusApp.projectName + '/';\n      } else {\n        plusApp.path = '//plus.yle.fi/' + plusApp.projectName + '/';\n      }\n    },\n    capitalizeFirstLetter: function capitalizeFirstLetter(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n    },\n    getScale: function getScale() {\n      var width = plus.width();\n      if (width >= 600) {\n        plus.addClass('wide');\n        return true;\n      }\n      if (width < 600) {\n        plus.removeClass('wide');\n        return false;\n      }\n    },\n    initMediaUrls: function initMediaUrls() {\n      $.each($('.handle_img', plus), function (i, el) {\n        $(undefined).attr('src', plusApp.path + 'img/' + $(undefined).attr('data-src'));\n      });\n    },\n    getData: function getData() {\n      $.getJSON(plusApp.path + 'data/data.json', function (data) {\n        plusApp.data = data;\n        plusApp.municipalities = [];\n        $.each(plusApp.data.municipalities, function (municipality_id, municipality) {\n          plusApp.municipalities.push({\n            id: municipality_id,\n            name: municipality.name_fi\n          });\n        });\n        plusApp.initAutocomplete();\n      });\n    },\n    initAutocomplete: function initAutocomplete() {\n      var element = $('.municipality_input_init', plus);\n      element.easyAutocomplete({\n        data: plusApp.municipalities,\n        getValue: 'name',\n        highlightPhrase: true,\n        list: {\n          hideAnimation: {\n            callback: function callback() {},\n            time: 200,\n            type: 'slide'\n          },\n          match: {\n            enabled: true\n          },\n          onKeyEnterEvent: function onKeyEnterEvent() {\n            plusApp.municipality_id = element.getSelectedItemData().id;\n          },\n          maxNumberOfElements: 10,\n          onSelectItemEvent: function onSelectItemEvent() {\n            plusApp.municipality_id = element.getSelectedItemData().id;\n          },\n          showAnimation: {\n            callback: function callback() {},\n            time: 200,\n            type: 'slide'\n          }\n        },\n        placeholder: 'esimerkiksi Tampere'\n      });\n    },\n    calculateTax: function calculateTax(tax_percent) {\n      plusApp.meta = $('<div class=\"meta_container\"></div>');\n      $('<h3>Lasketut vähennykset</h3>').appendTo(plusApp.meta);\n\n      // Vuositulot.\n      var vuositulot = plusApp.salary * 12;\n      $('<div class=\"vuositulot\"><span class=\"label\">Vuositulot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(vuositulot), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var ansiotulot = vuositulot;\n\n      // Tulonhankkimisvähennys\n      var tulonhankkimisvahennys = 750;\n      var temp = vuositulot > tulonhankkimisvahennys ? tulonhankkimisvahennys : vuositulot;\n      $('<div class=\"deduction\"><span class=\"label\">Tulonhankkimisvähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(temp), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      ansiotulot = vuositulot > tulonhankkimisvahennys ? ansiotulot - temp : ansiotulot - temp;\n\n      // Yle vero.\n      var ylevero = ansiotulot * 0.0068 < 70 ? 0 : Math.min(ansiotulot * 0.0068, 143); // 0.68%\n\n      // Työeläkevakuutusmaksu.\n      var percent = $('.age_input', plus).is(':checked') ? 0.0765 : 0.0615; // 7.65% || 6.15%\n      var tyoelakevakuutusmaksu = vuositulot * percent;\n      ansiotulot = ansiotulot - tyoelakevakuutusmaksu;\n      $('<div class=\"deduction\"><span class=\"label\">Työeläkevakuutusmaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyoelakevakuutusmaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Työttömyysvakuutusmaksu.\n      var tyottomyysvakuutusmaksu = vuositulot * 0.016; // 1.6%\n      ansiotulot = ansiotulot - tyottomyysvakuutusmaksu;\n      $('<div class=\"deduction\"><span class=\"label\">Työttömyysvakuutusmaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyottomyysvakuutusmaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Sairausvakuutuksen päivärahamaksu.\n      var sairausvakuutuksen_paivarahamaksu = 0;\n      if (vuositulot > 14000) {\n        sairausvakuutuksen_paivarahamaksu = vuositulot * 0.0158; // 1.58%\n        ansiotulot = ansiotulot - sairausvakuutuksen_paivarahamaksu;\n        $('<div class=\"deduction\"><span class=\"label\">Sairausvakuutuksen päivärahamaksu</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(sairausvakuutuksen_paivarahamaksu), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      }\n\n      // Valtion verotuksen alaiset tulot.\n      var valtioveron_alaiset_ansiotulot = ansiotulot;\n      $('<div><span class=\"label\">Valtion verotuksen alaiset tulot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(valtioveron_alaiset_ansiotulot), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Ansiotulovähennys.\n      var ansiotulovahennys = (7230 - 2500) * 0.51 + (vuositulot - 7230) * 0.28;\n      ansiotulovahennys = ansiotulovahennys > 3570 ? 3570 : ansiotulovahennys;\n      ansiotulovahennys = ansiotulovahennys - (vuositulot - tulonhankkimisvahennys - 14000) * 0.045;\n      ansiotulovahennys = ansiotulovahennys < 0 ? 0 : ansiotulovahennys;\n      $('<div class=\"deduction\"><span class=\"label\">Ansiotulovähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ansiotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Perusvähennys.\n      var perusvahennys = 3060 - (ansiotulot - ansiotulovahennys - 3060) * 0.18;\n      perusvahennys = perusvahennys < 0 ? 0 : perusvahennys;\n      $('<div class=\"deduction\"><span class=\"label\">Perusvähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(perusvahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      // Valtion verot.\n      var valtiovero = 0;\n      if (valtioveron_alaiset_ansiotulot > 73100) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 73100) * 0.3150 + 10174;\n      } else if (valtioveron_alaiset_ansiotulot > 41200) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 41200) * 0.2150 + 3315.50;\n      } else if (valtioveron_alaiset_ansiotulot > 25300) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 25300) * 0.1750 + 533;\n      } else if (valtioveron_alaiset_ansiotulot > 16900) {\n        valtiovero = (valtioveron_alaiset_ansiotulot - 16900) * 0.0625 + 8;\n      }\n\n      // Työtulovähennys.\n      var enimmaistyotulovahennys = void 0;\n      if (vuositulot - tulonhankkimisvahennys > 33000) {\n        var valtioveron_alaiset_ansiotulot_max = (valtioveron_alaiset_ansiotulot - 2500) * 0.12;\n        valtioveron_alaiset_ansiotulot_max = valtioveron_alaiset_ansiotulot_max > 1420 ? 1420 : valtioveron_alaiset_ansiotulot_max;\n        enimmaistyotulovahennys = Math.max(valtioveron_alaiset_ansiotulot_max - (vuositulot - tulonhankkimisvahennys - 33000) * 0.0151, 0);\n      } else {\n        enimmaistyotulovahennys = 1420;\n      }\n      $('<div><span class=\"label\">Enimmäisvähennys valtionverotuksessa</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(enimmaistyotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var tyotulovahennys = Math.max(enimmaistyotulovahennys - valtiovero, 0);\n\n      // Valtion verot.\n      valtiovero = Math.max(valtiovero - enimmaistyotulovahennys - tyotulovahennys, 0);\n\n      ansiotulot = ansiotulot - ansiotulovahennys - perusvahennys;\n      $('<div class=\"effective_income\"><span class=\"label\">Kunnallisverotuksessa verotettava tulo</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ansiotulot), 0) + ' € </span></div>').appendTo(plusApp.meta);\n      $('<div class=\"tyotulovahennys\"><span class=\"label\">Kunnallisverosta tehtävä työtulovähennys</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(tyotulovahennys), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      var kuntavero = Math.max(ansiotulot * (tax_percent / 100) - tyotulovahennys, 0);\n      $('<div><span class=\"label\">Kunnallisvero</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(kuntavero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      $('<div><span class=\"label\">Valtion verot</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(valtiovero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n\n      $('<div><span class=\"label\">Ylevero</span> <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr(ylevero), 0) + ' €</span></div>').appendTo(plusApp.meta);\n      return tyoelakevakuutusmaksu + tyottomyysvakuutusmaksu + sairausvakuutuksen_paivarahamaksu + kuntavero + valtiovero + ylevero;\n    },\n    printResults: function printResults() {\n      var result_container = $('.result_container', plus).empty().show();\n      var tax = plusApp.calculateTax(plusApp.data.municipalities[plusApp.municipality_id].tax_percent);\n      if (tax < 0) {\n        $('<h3>Et maksa veroja</h3>').appendTo(result_container);\n        $('<p>Tulosi ovat niin alhaiset, että et maksa lainkaan veroja.</p>').appendTo(result_container);\n      } else {\n        var net_income = plusApp.salary * 12 - tax;\n        var total_tax = tax + net_income * 0.2;\n        $('<h3>Vuonna 2017 tuloistasi yhteiskunnalle menee ' + plusApp.formatNr(plusApp.roundNr(tax, 0)) + '&nbsp;€. Sinulle jää kulutettavaksi ' + plusApp.formatNr(plusApp.roundNr(net_income, 0)) + '&nbsp;€. Tästä maksat kulutusveroa ' + plusApp.formatNr(plusApp.roundNr(net_income * 0.2, 0)) + ' €.</h3>').appendTo(result_container);\n        var tax_lastyear = plusApp.calculateTax(plusApp.data.municipalities[plusApp.municipality_id].tax_percent - plusApp.data.municipalities[plusApp.municipality_id].tax_percent_change);\n        var meta = plusApp.meta;\n        var vuositulot = plusApp.salary * 12;\n        // if (tax !== tax_lastyear) {\n        //   if (tax > tax_lastyear) {\n        //     $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr((tax / vuositulot) * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>. Vuodelle 2017 ' + plusApp.capitalizeFirstLetter(plusApp.municipality) + ' nosti kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit ' + plusApp.formatNr(plusApp.roundNr(tax_lastyear, 0)) + ' €.</p>').appendTo(result_container);\n        //   }\n        //   else {\n        //     $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr((tax / vuositulot) * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>. Vuodelle 2017 ' + plusApp.capitalizeFirstLetter(plusApp.municipality) + ' laski kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit ' + plusApp.formatNr(plusApp.roundNr(tax_lastyear, 0)) + ' €.</p>').appendTo(result_container);\n        //   }\n        // }\n        // else {\n        //   $('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class=\"value\">' + plusApp.formatNr(plusApp.roundNr((tax / vuositulot) * 100, 2)) + '</span>. Veroprosentti kunnassa ' + plusApp.data.municipalities[plusApp.municipality_id].name_fi + ' on <span class=\"value\">' + plusApp.formatNr(plusApp.data.municipalities[plusApp.municipality_id].tax_percent) + '</span>.</p>').appendTo(result_container);\n        // }\n        // if (plusApp.municipality_id === '170') {\n        //   $('<p>Maksat Suomen alhaisinta kunnallisveroa. Eniten maksaisit Savonlinnassa ja Jämijärvellä, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(22.5), 0)) + ' €.</p>').appendTo(result_container);\n        // }\n        // else if (plusApp.municipality_id === '740' || plusApp.municipality_id  === '181') {\n        //   $('<p>Maksat Suomen korkeinta kunnallisveroa. Vähiten maksaisit Jomalassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(16.5), 0)) + ' €.</p>').appendTo(result_container);\n        // }\n        // else {\n        //   $('<p>Vähiten maksaisit Ahvenanmaalla Jomalassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(16.5), 0)) + ' €. Eniten Jämijärvellä ja Savonlinnassa, ' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(22.5), 0)) + ' €.</p>').appendTo(result_container);\n        // }\n        $('<div class=\"more_container\"><button class=\"more active\">Näytä laskelmat</button></div>').appendTo(result_container);\n        meta.appendTo(result_container);\n        // Spendings.\n        var spendings_container = $('<div class=\"spendings_container\"></div>').appendTo(result_container);\n        $('<h3>Näin maksamasi verot kulutetaan</h3>').appendTo(spendings_container);\n        $.each(plusApp.data.spending_categories, function (i, spending_category) {\n          var spending_category_container = $('<div class=\"spending_category_container\"></div>').appendTo(spendings_container);\n          $('<div class=\"category_container main\" data-sub-container=\".spending_sub_category_container_' + i + '\"><div class=\"category_name\">' + spending_category.title + '</div><div class=\"category_share\">' + plusApp.formatNr(plusApp.roundNr(spending_category.share * total_tax, 0)) + ' €</div></div>').appendTo(spending_category_container);\n          var spending_sub_category_container = $('<div class=\"spending_sub_category_container spending_sub_category_container_' + i + '\"></div>').appendTo(spending_category_container);\n          $.each(spending_category.subcategories, function (j, category) {\n            $('<div class=\"category_container sub\"><div class=\"category_name\">' + category.title + '</div><div class=\"category_share\">' + plusApp.formatNr(plusApp.roundNr(category.share * total_tax, 0)) + ' €</div></div>').appendTo(spending_sub_category_container);\n          });\n        });\n        // Neigbors.\n        var neighbors_container = $('<div class=\"neighbors_container\"></div>').appendTo(result_container);\n        $('<h3>Naapurikunnat</h3>').appendTo(neighbors_container);\n        var table_container = $('<table></table>').appendTo(neighbors_container);\n        $('<thead><tr><th>Kunta</th><th class=\"number\">Vero-%</th><th class=\"number\">€/12 kk</th><th class=\"number\">Erotus</th></tr></thead>').appendTo(table_container);\n        var tbody_container = $('<tbody></tbody>').appendTo(table_container);\n        $.each(plusApp.data.neighbors[plusApp.municipality_id], function (i, el) {\n          var tr_container = $('<tr></tr>').appendTo(tbody_container);\n          if (plusApp.data.municipalities[el]) {\n            $('<td>' + plusApp.data.municipalities[el].name_fi + '</td>').appendTo(tr_container);\n            $('<td class=\"number\">' + plusApp.formatNr(plusApp.data.municipalities[el].tax_percent) + '</td>').appendTo(tr_container);\n            $('<td class=\"number\">' + plusApp.formatNr(plusApp.roundNr(plusApp.calculateTax(plusApp.data.municipalities[el].tax_percent), 0)) + '</td>').appendTo(tr_container);\n            var difference = plusApp.calculateTax(plusApp.data.municipalities[el].tax_percent) - tax;\n            if (difference < 0) {\n              $('<td class=\"number\">' + plusApp.formatNr(plusApp.roundNr(difference, 0)) + ' €</td>').appendTo(tr_container);\n            } else if (difference > 0) {\n              $('<td class=\"number\">+' + plusApp.formatNr(plusApp.roundNr(difference, 0)) + ' €</td>').appendTo(tr_container);\n            } else {\n              $('<td class=\"number\">–</td>').appendTo(tr_container);\n            }\n          }\n        });\n      }\n    },\n    initEvents: function initEvents() {\n      $(window).on('resize', plusApp.getScale);\n      plus.on('click', '.input_container .button', function () {\n        plusApp.municipality = $('.municipality_input', plus).val();\n        plusApp.salary = $('.salary_input', plus).val();\n        $.each(plusApp.data.municipalities, function (municipality_id, municipality) {\n          if (municipality.name_fi.toLowerCase() === plusApp.municipality.toLowerCase() && plusApp.salary >= 0) {\n            plusApp.municipality_id = municipality_id;\n            plusApp.printResults();\n            return false;\n          }\n        });\n      });\n      plus.on('click', '.more_container .more', function (event) {\n        if ($(event.currentTarget).text() === 'Näytä laskelmat') {\n          $(event.currentTarget).text('Piilota');\n        } else {\n          $(event.currentTarget).text('Näytä laskelmat');\n        }\n        $('.meta_container', plus).slideToggle();\n      });\n      plus.on('click', '.category_container.main', function (event) {\n        $($(event.currentTarget).data('sub-container'), plus).slideToggle(500);\n      });\n    },\n    unmount: function unmount() {\n      $(window).off('resize', plusApp.getScale);\n      if (plus !== undefined) {\n        plus.unbind();\n      }\n      delete window.plusApp[plusApp.projectName];\n    },\n    mount: function mount() {\n      plusApp.init();\n      plusApp.isInitialized = true;\n    },\n    init: function init() {\n      plus = $('.plus-app.plus-app-' + plusApp.projectName);\n      plusApp.setPath();\n      plusApp.getScale();\n      plusApp.initMediaUrls();\n      plusApp.initEvents();\n\n      plusApp.getData();\n    },\n    meta: {\n      version: '1.0.0'\n    }\n  };\n  plusApp.projectName = '2017-10-verolaskuri';\n  if (window.plusApp === undefined) {\n    window.plusApp = {};\n  }\n  if (window.plusApp[plusApp.projectName] === undefined) {\n    window.plusApp[plusApp.projectName] = plusApp;\n    window.plusApp[plusApp.projectName].mount();\n  }\n})(jQuery);\n\n},{\"easy-autocomplete\":2}],2:[function(require,module,exports){\n/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\r\n\r\n/*\r\n * EasyAutocomplete - Configuration \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Configuration = function Configuration(options) {\r\n\t\tvar defaults = {\r\n\t\t\tdata: \"list-required\",\r\n\t\t\turl: \"list-required\",\r\n\t\t\tdataType: \"json\",\r\n\r\n\t\t\tlistLocation: function(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\r\n\t\t\txmlElementName: \"\",\r\n\r\n\t\t\tgetValue: function(element) {\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\r\n\t\t\tautocompleteOff: true,\r\n\r\n\t\t\tplaceholder: false,\r\n\r\n\t\t\tajaxCallback: function() {},\r\n\r\n\t\t\tmatchResponseProperty: false,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\tsort: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tmethod: function(a, b) {\r\n\t\t\t\t\t\ta = defaults.getValue(a);\r\n\t\t\t\t\t\tb = defaults.getValue(b);\r\n\t\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaxNumberOfElements: 6,\r\n\r\n\t\t\t\thideOnEmptyPhrase: true,\r\n\r\n\t\t\t\tmatch: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t\tmethod: function(element, phrase) {\r\n\r\n\t\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshowAnimation: {\r\n\t\t\t\t\ttype: \"normal\", //normal|slide|fade\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\thideAnimation: {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* Events */\r\n\t\t\t\tonClickEvent: function() {},\r\n\t\t\t\tonSelectItemEvent: function() {},\r\n\t\t\t\tonLoadEvent: function() {},\r\n\t\t\t\tonChooseEvent: function() {},\r\n\t\t\t\tonKeyEnterEvent: function() {},\r\n\t\t\t\tonMouseOverEvent: function() {},\r\n\t\t\t\tonMouseOutEvent: function() {},\t\r\n\t\t\t\tonShowListEvent: function() {},\r\n\t\t\t\tonHideListEvent: function() {}\r\n\t\t\t},\r\n\r\n\t\t\thighlightPhrase: true,\r\n\r\n\t\t\ttheme: \"\",\r\n\r\n\t\t\tcssClasses: \"\",\r\n\r\n\t\t\tminCharNumber: 0,\r\n\r\n\t\t\trequestDelay: 0,\r\n\r\n\t\t\tadjustWidth: true,\r\n\r\n\t\t\tajaxSettings: {},\r\n\r\n\t\t\tpreparePostData: function(data, inputPhrase) {return data;},\r\n\r\n\t\t\tloggerEnabled: true,\r\n\r\n\t\t\ttemplate: \"\",\r\n\r\n\t\t\tcategoriesAssigned: false,\r\n\r\n\t\t\tcategories: [{\r\n\t\t\t\tmaxNumberOfElements: 4\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t\t\r\n\t\tvar externalObjects = [\"ajaxSettings\", \"template\"];\r\n\r\n\t\tthis.get = function(propertyName) {\r\n\t\t\treturn defaults[propertyName];\r\n\t\t};\r\n\r\n\t\tthis.equals = function(name, value) {\r\n\t\t\tif (isAssigned(name)) {\r\n\t\t\t\tif (defaults[name] === value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthis.checkDataUrlProperties = function() {\r\n\t\t\tif (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tthis.checkRequiredProperties = function() {\r\n\t\t\tfor (var propertyName in defaults) {\r\n\t\t\t\tif (defaults[propertyName] === \"required\") {\r\n\t\t\t\t\tlogger.error(\"Option \" + propertyName + \" must be defined\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tthis.printPropertiesThatDoesntExist = function(consol, optionsToCheck) {\r\n\t\t\tprintPropertiesThatDoesntExist(consol, optionsToCheck);\r\n\t\t};\r\n\r\n\r\n\t\tprepareDefaults();\r\n\r\n\t\tmergeOptions();\r\n\r\n\t\tif (defaults.loggerEnabled === true) {\r\n\t\t\tprintPropertiesThatDoesntExist(console, options);\t\r\n\t\t}\r\n\r\n\t\taddAjaxSettings();\r\n\r\n\t\tprocessAfterMerge();\r\n\t\tfunction prepareDefaults() {\r\n\r\n\t\t\tif (options.dataType === \"xml\") {\r\n\t\t\t\t\r\n\t\t\t\tif (!options.getValue) {\r\n\r\n\t\t\t\t\toptions.getValue = function(element) {\r\n\t\t\t\t\t\treturn $(element).text();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (!options.list) {\r\n\r\n\t\t\t\t\toptions.list = {};\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (!options.list.sort) {\r\n\t\t\t\t\toptions.list.sort = {};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\toptions.list.sort.method = function(a, b) {\r\n\t\t\t\t\ta = options.getValue(a);\r\n\t\t\t\t\tb = options.getValue(b);\r\n\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (!options.list.match) {\r\n\t\t\t\t\toptions.list.match = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.list.match.method = function(element, phrase) {\r\n\r\n\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t\tif (options.categories !== undefined && options.categories instanceof Array) {\r\n\r\n\t\t\t\tvar categories = [];\r\n\r\n\t\t\t\tfor (var i = 0, length = options.categories.length; i < length; i += 1) { \r\n\r\n\t\t\t\t\tvar category = options.categories[i];\r\n\r\n\t\t\t\t\tfor (var property in defaults.categories[0]) {\r\n\r\n\t\t\t\t\t\tif (category[property] === undefined) {\r\n\t\t\t\t\t\t\tcategory[property] = defaults.categories[0][property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.categories = categories;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mergeOptions() {\r\n\r\n\t\t\tdefaults = mergeObjects(defaults, options);\r\n\r\n\t\t\tfunction mergeObjects(source, target) {\r\n\t\t\t\tvar mergedObject = source || {};\r\n\r\n\t\t\t\tfor (var propertyName in source) {\r\n\t\t\t\t\tif (target[propertyName] !== undefined && target[propertyName] !== null) {\r\n\r\n\t\t\t\t\t\tif (typeof target[propertyName] !== \"object\" || \r\n\t\t\t\t\t\t\t\ttarget[propertyName] instanceof Array) {\r\n\t\t\t\t\t\t\tmergedObject[propertyName] = target[propertyName];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeObjects(source[propertyName], target[propertyName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t/* If data is an object */\r\n\t\t\t\tif (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\r\n\t\t\t\t\tmergedObject.data = target.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mergedObject;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\r\n\t\tfunction processAfterMerge() {\r\n\t\t\t\r\n\t\t\tif (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.url;\r\n\t\t\t\tdefaults.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.ajaxSettings.url;\r\n\t\t\t\tdefaults.ajaxSettings.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.listLocation === \"string\") {\r\n\t\t\t\tvar defaultlistLocation = defaults.listLocation;\r\n\r\n\t\t\t\tif (defaults.dataType.toUpperCase() === \"XML\") {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn $(data).find(defaultlistLocation);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn data[defaultlistLocation];\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.getValue === \"string\") {\r\n\t\t\t\tvar defaultsGetValue = defaults.getValue;\r\n\t\t\t\tdefaults.getValue = function(element) {\r\n\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (options.categories !== undefined) {\r\n\t\t\t\tdefaults.categoriesAssigned = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addAjaxSettings() {\r\n\r\n\t\t\tif (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\r\n\t\t\t\tdefaults.ajaxSettings = options.ajaxSettings;\r\n\t\t\t} else {\r\n\t\t\t\tdefaults.ajaxSettings = {};\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction isAssigned(name) {\r\n\t\t\tif (defaults[name] !== undefined && defaults[name] !== null) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction printPropertiesThatDoesntExist(consol, optionsToCheck) {\r\n\t\t\t\r\n\t\t\tcheckPropertiesIfExist(defaults, optionsToCheck);\r\n\r\n\t\t\tfunction checkPropertiesIfExist(source, target) {\r\n\t\t\t\tfor(var property in target) {\r\n\t\t\t\t\tif (source[property] === undefined) {\r\n\t\t\t\t\t\tconsol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\r\n\t\t\t\t\t\tcheckPropertiesIfExist(source[property], target[property]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Logger \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\t\r\n\tscope.Logger = function Logger() {\r\n\r\n\t\tthis.error = function(message) {\r\n\t\t\tconsole.log(\"ERROR: \" + message);\r\n\t\t};\r\n\r\n\t\tthis.warning = function(message) {\r\n\t\t\tconsole.log(\"WARNING: \" + message);\r\n\t\t};\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\t\r\n\r\n/*\r\n * EasyAutocomplete - Constans\r\n */\r\nvar EasyAutocomplete = (function(scope){\t\r\n\t\r\n\tscope.Constans = function Constans() {\r\n\t\tvar constants = {\r\n\t\t\tCONTAINER_CLASS: \"easy-autocomplete-container\",\r\n\t\t\tCONTAINER_ID: \"eac-container-\",\r\n\r\n\t\t\tWRAPPER_CSS_CLASS: \"easy-autocomplete\"\r\n\t\t};\r\n\r\n\t\tthis.getValue = function(propertyName) {\r\n\t\t\treturn constants[propertyName];\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\r\n\r\n\r\n\t\tthis.init = function(data) {\r\n\t\t\tvar listBuilder = [],\r\n\t\t\t\tbuilder = {};\r\n\r\n\t\t\tbuilder.data = configuration.get(\"listLocation\")(data);\r\n\t\t\tbuilder.getValue = configuration.get(\"getValue\");\r\n\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\r\n\t\t\t\t\r\n\t\t\tlistBuilder.push(builder);\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.updateCategories = function(listBuilder, data) {\r\n\t\t\t\r\n\t\t\tif (configuration.get(\"categoriesAssigned\")) {\r\n\r\n\t\t\t\tlistBuilder = [];\r\n\r\n\t\t\t\tfor(var i = 0; i < configuration.get(\"categories\").length; i += 1) {\r\n\r\n\t\t\t\t\tvar builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\r\n\r\n\t\t\t\t\tlistBuilder.push(builder);\r\n\t\t\t\t}\r\n\r\n\t\t\t} \r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.convertXml = function(listBuilder) {\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tfor(var i = 0; i < listBuilder.length; i += 1) {\r\n\t\t\t\t\tlistBuilder[i].data = convertXmlToList(listBuilder[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.processData = function(listBuilder, inputPhrase) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilder.length; i < length; i+=1) {\r\n\t\t\t\tlistBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.checkIfDataExists = function(listBuilders) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilders.length; i < length; i += 1) {\r\n\r\n\t\t\t\tif (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\r\n\t\t\t\t\tif (listBuilders[i].data.length > 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tfunction convertToListBuilder(category, data) {\r\n\r\n\t\t\tvar builder = {};\r\n\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tbuilder = convertXmlToListBuilder();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuilder = convertDataToListBuilder();\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (category.header !== undefined) {\r\n\t\t\t\tbuilder.header = category.header;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.maxNumberOfElements !== undefined) {\r\n\t\t\t\tbuilder.maxNumberOfElements = category.maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (configuration.get(\"list\").maxNumberOfElements !== undefined) {\r\n\r\n\t\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.getValue !== undefined) {\r\n\r\n\t\t\t\tif (typeof category.getValue === \"string\") {\r\n\t\t\t\t\tvar defaultsGetValue = category.getValue;\r\n\t\t\t\t\tbuilder.getValue = function(element) {\r\n\t\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (typeof category.getValue === \"function\") {\r\n\t\t\t\t\tbuilder.getValue = category.getValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tbuilder.getValue = configuration.get(\"getValue\");\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn builder;\r\n\r\n\r\n\t\t\tfunction convertXmlToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {},\r\n\t\t\t\t\tlistLocation;\r\n\r\n\t\t\t\tif (category.xmlElementName !== undefined) {\r\n\t\t\t\t\tbuilder.xmlElementName = category.xmlElementName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = category.listLocation;\r\n\t\t\t\t} else if (configuration.get(\"listLocation\") !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = configuration.get(\"listLocation\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (listLocation !== undefined) {\r\n\t\t\t\t\tif (typeof listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = $(data).find(listLocation);\r\n\t\t\t\t\t} else if (typeof listLocation === \"function\") {\r\n\r\n\t\t\t\t\t\tbuilder.data = listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction convertDataToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {};\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tif (typeof category.listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = data[category.listLocation];\r\n\t\t\t\t\t} else if (typeof category.listLocation === \"function\") {\r\n\t\t\t\t\t\tbuilder.data = category.listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction convertXmlToList(builder) {\r\n\t\t\tvar simpleList = [];\r\n\r\n\t\t\tif (builder.xmlElementName === undefined) {\r\n\t\t\t\tbuilder.xmlElementName = configuration.get(\"xmlElementName\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$(builder.data).find(builder.xmlElementName).each(function() {\r\n\t\t\t\tsimpleList.push(this);\r\n\t\t\t});\r\n\r\n\t\t\treturn simpleList;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.proccess = function proccessData(config, listBuilder, phrase) {\r\n\r\n\t\tscope.proccess.match = match;\r\n\r\n\t\tvar list = listBuilder.data,\r\n\t\t\tinputPhrase = phrase;//TODO REFACTOR\r\n\r\n\t\tlist = findMatch(list, inputPhrase);\r\n\t\tlist = reduceElementsInList(list);\r\n\t\tlist = sort(list);\r\n\r\n\t\treturn list;\r\n\r\n\r\n\t\tfunction findMatch(list, phrase) {\r\n\t\t\tvar preparedList = [],\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tif (config.get(\"list\").match.enabled) {\r\n\r\n\t\t\t\tfor(var i = 0, length = list.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\tvalue = config.get(\"getValue\")(list[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (match(value, phrase)) {\r\n\t\t\t\t\t\tpreparedList.push(list[i]);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tpreparedList = list;\r\n\t\t\t}\r\n\r\n\t\t\treturn preparedList;\r\n\t\t}\r\n\r\n\t\tfunction match(value, phrase) {\r\n\r\n\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\r\n\t\t\t\tif (typeof value === \"string\") {\r\n\t\t\t\t\tvalue = value.toLowerCase();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (config.get(\"list\").match.method(value, phrase)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction reduceElementsInList(list) {\r\n\t\t\tif (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\r\n\t\t\t\tlist = list.slice(0, listBuilder.maxNumberOfElements);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tfunction sort(list) {\r\n\t\t\tif (config.get(\"list\").sort.enabled) {\r\n\t\t\t\tlist.sort(config.get(\"list\").sort.method);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Template = function Template(options) {\r\n\r\n\r\n\t\tvar genericTemplates = {\r\n\t\t\tbasic: {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\tmethod: function(element) { return element; },\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\ttype: \"description\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tdescription: \"description\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\treturn element + \" - description\"; },\r\n\t\t\t\tcssClass: \"eac-description\"\r\n\t\t\t},\r\n\t\t\ticonLeft: {\r\n\t\t\t\ttype: \"iconLeft\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticon: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-left\"\r\n\t\t\t},\r\n\t\t\ticonRight: {\r\n\t\t\t\ttype: \"iconRight\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticonSrc: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-right\"\r\n\t\t\t},\r\n\t\t\tlinks: {\r\n\t\t\t\ttype: \"links\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tlink: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tcustom: {\r\n\t\t\t\ttype: \"custom\",\r\n\t\t\t\tmethod: function() {},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/*\r\n\t\t * Converts method with {{text}} to function\r\n\t\t */\r\n\t\tconvertTemplateToMethod = function(template) {\r\n\r\n\r\n\t\t\tvar _fields = template.fields,\r\n\t\t\t\tbuildMethod;\r\n\r\n\t\t\tif (template.type === \"description\") {\r\n\r\n\t\t\t\tbuildMethod = genericTemplates.description.method; \r\n\r\n\t\t\t\tif (typeof _fields.description === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.description === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif (template.type === \"iconRight\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" ;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" ;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"iconLeft\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif(template.type === \"links\") {\r\n\r\n\t\t\t\tif (typeof _fields.link === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.link === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"custom\") {\r\n\r\n\t\t\t\treturn template.method;\r\n\t\t\t}\r\n\r\n\t\t\treturn genericTemplates.basic.method;\r\n\r\n\t\t},\r\n\r\n\r\n\t\tprepareBuildMethod = function(options) {\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\r\n\t\t\t\treturn convertTemplateToMethod(options);\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ttemplateClass = function(options) {\r\n\t\t\tvar emptyStringFunction = function() {return \"\";};\r\n\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\t\t\t\treturn (function () { \r\n\t\t\t\t\tvar _cssClass = genericTemplates[options.type].cssClass;\r\n\t\t\t\t\treturn function() { return _cssClass;};\r\n\t\t\t\t})();\r\n\t\t\t} else {\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getTemplateClass = templateClass(options);\r\n\r\n\t\tthis.build = prepareBuildMethod(options);\r\n\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\t\r\n\tscope.main = function Core($input, options) {\r\n\t\t\t\t\r\n\t\tvar module = {\r\n\t\t\t\tname: \"EasyAutocomplete\",\r\n\t\t\t\tshortcut: \"eac\"\r\n\t\t\t};\r\n\r\n\t\tvar consts = new scope.Constans(),\r\n\t\t\tconfig = new scope.Configuration(options),\r\n\t\t\tlogger = new scope.Logger(),\r\n\t\t\ttemplate = new scope.Template(options.template),\r\n\t\t\tlistBuilderService = new scope.ListBuilderService(config, scope.proccess),\r\n\t\t\tcheckParam = config.equals,\r\n\r\n\t\t\t$field = $input, \r\n\t\t\t$container = \"\",\r\n\t\t\telementsList = [],\r\n\t\t\tselectedElement = -1,\r\n\t\t\trequestDelayTimeoutId;\r\n\r\n\t\tscope.consts = consts;\r\n\r\n\t\tthis.getConstants = function() {\r\n\t\t\treturn consts;\r\n\t\t};\r\n\r\n\t\tthis.getConfiguration = function() {\r\n\t\t\treturn config;\r\n\t\t};\r\n\r\n\t\tthis.getContainer = function() {\r\n\t\t\treturn $container;\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemIndex = function() {\r\n\t\t\treturn selectedElement;\r\n\t\t};\r\n\r\n\t\tthis.getItems = function () {\r\n\t\t\treturn elementsList;\r\n\t\t};\r\n\r\n\t\tthis.getItemData = function(index) {\r\n\r\n\t\t\tif (elementsList.length < index || elementsList[index] === undefined) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn elementsList[index];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemData = function() {\r\n\t\t\treturn this.getItemData(selectedElement);\r\n\t\t};\r\n\r\n\t\tthis.build = function() {\r\n\t\t\tprepareField();\r\n\t\t};\r\n\r\n\t\tthis.init = function() {\r\n\t\t\tinit();\r\n\t\t};\r\n\t\tfunction init() {\r\n\r\n\t\t\tif ($field.length === 0) {\r\n\t\t\t\tlogger.error(\"Input field doesn't exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkDataUrlProperties()) {\r\n\t\t\t\tlogger.error(\"One of options variables 'data' or 'url' must be defined.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkRequiredProperties()) {\r\n\t\t\t\tlogger.error(\"Will not work without mentioned properties.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tprepareField();\r\n\t\t\tbindEvents();\t\r\n\r\n\t\t}\r\n\t\tfunction prepareField() {\r\n\r\n\t\t\t\t\r\n\t\t\tif ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\r\n\t\t\t\tremoveContainer();\r\n\t\t\t\tremoveWrapper();\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tcreateWrapper();\r\n\t\t\tcreateContainer();\t\r\n\r\n\t\t\t$container = $(\"#\" + getContainerId());\r\n\t\t\tif (config.get(\"placeholder\")) {\r\n\t\t\t\t$field.attr(\"placeholder\", config.get(\"placeholder\"));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction createWrapper() {\r\n\t\t\t\tvar $wrapper = $(\"<div>\"),\r\n\t\t\t\t\tclasses = consts.getValue(\"WRAPPER_CSS_CLASS\");\r\n\r\n\t\t\t\r\n\t\t\t\tif (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\r\n\t\t\t\t\tclasses += \" eac-\" + config.get(\"theme\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + config.get(\"cssClasses\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (template.getTemplateClass() !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + template.getTemplateClass();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.addClass(classes);\r\n\t\t\t\t$field.wrap($wrapper);\r\n\r\n\r\n\t\t\t\tif (config.get(\"adjustWidth\") === true) {\r\n\t\t\t\t\tadjustWrapperWidth();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction adjustWrapperWidth() {\r\n\t\t\t\tvar fieldWidth = $field.outerWidth();\r\n\r\n\t\t\t\t$field.parent().css(\"width\", fieldWidth);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeWrapper() {\r\n\t\t\t\t$field.unwrap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction createContainer() {\r\n\t\t\t\tvar $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\r\n\r\n\t\t\t\t$elements_container\r\n\t\t\t\t\t\t.attr(\"id\", getContainerId())\r\n\t\t\t\t\t\t.prepend($(\"<ul>\"));\r\n\r\n\r\n\t\t\t\t(function() {\r\n\r\n\t\t\t\t\t$elements_container\r\n\t\t\t\t\t\t/* List show animation */\r\n\t\t\t\t\t\t.on(\"show.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").showAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideDown(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeIn(animationTime), callback;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").show();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onShowListEvent();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* List hide animation */\r\n\t\t\t\t\t\t.on(\"hide.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").hideAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideUp(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeOut(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onHideListEvent();\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"selectElement.eac\", function() {\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").removeClass(\"selected\");\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onSelectItemEvent();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"loadElements.eac\", function(event, listBuilders, phrase) {\r\n\t\t\t\r\n\r\n\t\t\t\t\t\t\tvar $item = \"\",\r\n\t\t\t\t\t\t\t\t$listContainer = $elements_container.find(\"ul\");\r\n\r\n\t\t\t\t\t\t\t$listContainer\r\n\t\t\t\t\t\t\t\t.empty()\r\n\t\t\t\t\t\t\t\t.detach();\r\n\r\n\t\t\t\t\t\t\telementsList = [];\r\n\t\t\t\t\t\t\tvar counter = 0;\r\n\t\t\t\t\t\t\tfor(var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar listData = listBuilders[builderIndex].data;\r\n\r\n\t\t\t\t\t\t\t\tif (listData.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\r\n\t\t\t\t\t\t\t\t\t$listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\r\n\t\t\t\t\t\t\t\t\t$item = $(\"<li><div class='eac-item'></div></li>\");\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar j = i,\r\n\t\t\t\t\t\t\t\t\t\t\titemCounter = counter,\r\n\t\t\t\t\t\t\t\t\t\t\telementsValue = listBuilders[builderIndex].getValue(listData[j]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t$item.find(\" > div\")\r\n\t\t\t\t\t\t\t\t\t\t\t.on(\"click\", function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$field.val(elementsValue).trigger(\"change\");\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onClickEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseover(function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOverEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOutEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.html(template.build(highlight(elementsValue, phrase), listData[j]));\r\n\t\t\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\t\t\t$listContainer.append($item);\r\n\t\t\t\t\t\t\t\t\telementsList.push(listData[i]);\r\n\t\t\t\t\t\t\t\t\tcounter += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elements_container.append($listContainer);\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onLoadEvent();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})();\r\n\r\n\t\t\t\t$field.after($elements_container);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeContainer() {\r\n\t\t\t\t$field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction highlight(string, phrase) {\r\n\r\n\t\t\t\tif(config.get(\"highlightPhrase\") && phrase !== \"\") {\r\n\t\t\t\t\treturn highlightPhrase(string, phrase);\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn string;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction escapeRegExp(str) {\r\n\t\t\t\treturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n \t\t\t}\r\n\r\n\t\t\tfunction highlightPhrase(string, phrase) {\r\n\t\t\t\tvar escapedPhrase = escapeRegExp(phrase);\r\n\t\t\t\treturn (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\") , \"<b>$1</b>\");\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t\tfunction getContainerId() {\r\n\t\t\t\r\n\t\t\tvar elementId = $field.attr(\"id\");\r\n\r\n\t\t\telementId = consts.getValue(\"CONTAINER_ID\") + elementId;\r\n\r\n\t\t\treturn elementId;\r\n\t\t}\r\n\t\tfunction bindEvents() {\r\n\r\n\t\t\tbindAllEvents();\r\n\t\t\t\r\n\r\n\t\t\tfunction bindAllEvents() {\r\n\t\t\t\tif (checkParam(\"autocompleteOff\", true)) {\r\n\t\t\t\t\tremoveAutocomplete();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbindFocusOut();\r\n\t\t\t\tbindKeyup();\r\n\t\t\t\tbindKeydown();\r\n\t\t\t\tbindKeypress();\r\n\t\t\t\tbindFocus();\r\n\t\t\t\tbindBlur();\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocusOut() {\r\n\t\t\t\t$field.focusout(function () {\r\n\r\n\t\t\t\t\tvar fieldValue = $field.val(),\r\n\t\t\t\t\t\tphrase;\r\n\r\n\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\tfieldValue = fieldValue.toLowerCase();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0, length = elementsList.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\t\tphrase = config.get(\"getValue\")(elementsList[i]);\r\n\t\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (phrase === fieldValue) {\r\n\t\t\t\t\t\t\tselectedElement = i;\r\n\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeyup() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keyup\")\r\n\t\t\t\t.keyup(function(event) {\r\n\r\n\t\t\t\t\tswitch(event.keyCode) {\r\n\r\n\t\t\t\t\t\tcase 27:\r\n\r\n\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\tloseFieldFocus();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 38:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement > 0) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement -= 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 40:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement < elementsList.length - 1) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement += 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif (event.keyCode > 40 || event.keyCode === 8) {\r\n\r\n\t\t\t\t\t\t\t\tvar inputPhrase = $field.val();\r\n\r\n\t\t\t\t\t\t\t\tif (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (config.get(\"requestDelay\") > 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (requestDelayTimeoutId !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearTimeout(requestDelayTimeoutId);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trequestDelayTimeoutId = setTimeout(function () { loadData(inputPhrase);}, config.get(\"requestDelay\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tloadData(inputPhrase);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tfunction loadData(inputPhrase) {\r\n\r\n\r\n\t\t\t\t\t\tif (inputPhrase.length < config.get(\"minCharNumber\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (config.get(\"data\") !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tvar data = config.get(\"data\");\r\n\r\n\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tif ($field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = createAjaxSettings();\r\n\r\n\t\t\t\t\t\tif (settings.url === undefined || settings.url === \"\") {\r\n\t\t\t\t\t\t\tsettings.url = config.get(\"url\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (settings.dataType === undefined || settings.dataType === \"\") {\r\n\t\t\t\t\t\t\tsettings.dataType = config.get(\"dataType\");\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (settings.url !== undefined && settings.url !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tsettings.url = settings.url(inputPhrase);\r\n\r\n\t\t\t\t\t\t\tsettings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t$.ajax(settings) \r\n\t\t\t\t\t\t\t\t.done(function(data) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.convertXml(listBuilders);\r\n\t\t\t\t\t\t\t\t\tif (checkInputPhraseMatchResponse(inputPhrase, data)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconfig.get(\"ajaxCallback\")();\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.fail(function() {\r\n\t\t\t\t\t\t\t\t\tlogger.warning(\"Fail to load response data\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.always(function() {\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tfunction createAjaxSettings() {\r\n\r\n\t\t\t\t\t\t\tvar settings = {},\r\n\t\t\t\t\t\t\t\tajaxSettings = config.get(\"ajaxSettings\") || {};\r\n\r\n\t\t\t\t\t\t\tfor (var set in ajaxSettings) {\r\n\t\t\t\t\t\t\t\tsettings[set] = ajaxSettings[set];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn settings;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction checkInputPhraseMatchResponse(inputPhrase, data) {\r\n\r\n\t\t\t\t\t\t\tif (config.get(\"matchResponseProperty\") !== false) {\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"string\") {\r\n\t\t\t\t\t\t\t\t\treturn (data[config.get(\"matchResponseProperty\")] === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"function\") {\r\n\t\t\t\t\t\t\t\t\treturn (config.get(\"matchResponseProperty\")(data) === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeydown() {\r\n\t\t\t\t$field\r\n\t\t\t\t\t.on(\"keydown\", function(evt) {\r\n\t        \t\t    evt = evt || window.event;\r\n\t        \t\t    var keyCode = evt.keyCode;\r\n\t        \t\t    if (keyCode === 38) {\r\n\t        \t\t        suppressKeypress = true; \r\n\t        \t\t        return false;\r\n\t        \t\t    }\r\n\t\t        \t})\r\n\t\t\t\t\t.keydown(function(event) {\r\n\r\n\t\t\t\t\t\tif (event.keyCode === 13 && selectedElement > -1) {\r\n\r\n\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onKeyEnterEvent();\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\r\n\t\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\t\thideContainer();\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeypress() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keypress\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocus() {\r\n\t\t\t\t$field.focus(function() {\r\n\r\n\t\t\t\t\tif ($field.val() !== \"\" && elementsList.length > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindBlur() {\r\n\t\t\t\t$field.blur(function() {\r\n\t\t\t\t\tsetTimeout(function() { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAutocomplete() {\r\n\t\t\t\t$field.attr(\"autocomplete\",\"off\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction showContainer() {\r\n\t\t\t$container.trigger(\"show.eac\");\r\n\t\t}\r\n\r\n\t\tfunction hideContainer() {\r\n\t\t\t$container.trigger(\"hide.eac\");\r\n\t\t}\r\n\r\n\t\tfunction selectElement(index) {\r\n\t\t\t\r\n\t\t\t$container.trigger(\"selectElement.eac\", index);\r\n\t\t}\r\n\r\n\t\tfunction loadElements(list, phrase) {\r\n\t\t\t$container.trigger(\"loadElements.eac\", [list, phrase]);\r\n\t\t}\r\n\r\n\t\tfunction loseFieldFocus() {\r\n\t\t\t$field.trigger(\"blur\");\r\n\t\t}\r\n\r\n\r\n\t};\r\n\tscope.eacHandles = [];\r\n\r\n\tscope.getHandle = function(id) {\r\n\t\treturn scope.eacHandles[id];\r\n\t};\r\n\r\n\tscope.inputHasId = function(input) {\r\n\r\n\t\tif($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscope.assignRandomId = function(input) {\r\n\r\n\t\tvar fieldId = \"\";\r\n\r\n\t\tdo {\r\n\t\t\tfieldId = \"eac-\" + Math.floor(Math.random() * 10000);\t\t\r\n\t\t} while ($(\"#\" + fieldId).length !== 0);\r\n\t\t\r\n\t\telementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\r\n\r\n\t\t$(input).attr(\"id\", fieldId);\r\n \r\n\t};\r\n\r\n\tscope.setHandle = function(handle, id) {\r\n\t\tscope.eacHandles[id] = handle;\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n(function($) {\r\n\r\n\t$.fn.easyAutocomplete = function(options) {\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\teacHandle = new EasyAutocomplete.main($this, options);\r\n\r\n\t\t\tif (!EasyAutocomplete.inputHasId($this)) {\r\n\t\t\t\tEasyAutocomplete.assignRandomId($this);\r\n\t\t\t}\r\n\r\n\t\t\teacHandle.init();\r\n\r\n\t\t\tEasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.getSelectedItemIndex = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItems = function () {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItems();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItemData = function(index) {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined && index > -1) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItemData(index);\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getSelectedItemData = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemData();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n})(jQuery);\r\n\n},{}]},{},[1]);\n"]}