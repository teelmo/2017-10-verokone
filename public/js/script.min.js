(function () { var define = undefined;!function t(e,n,a){function i(r,s){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return i(n||t)},c,c.exports,t,e,n,a)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(t,e,n){"use strict";!function(e){t("easy-autocomplete");var n=void 0,a={formatNr:function(t,e){return t=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;"),t=t.replace(".",","),!0===e&&-1===t.indexOf(",")&&(t+=",0"),""===t?0:t},roundNr:function(t,e){return parseFloat(t.toFixed(e))},setPath:function(){location.href.match("dev")?a.path="http://dev.yle.fi/2017/"+a.projectName+"/public/":location.href.match("yle.fi/plus")?a.path="//yle.fi/plus/yle/2017/"+a.projectName+"/":a.path="//plus.yle.fi/"+a.projectName+"/"},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},getScale:function(){var t=n.width();return t>=600?(n.addClass("wide"),!0):t<600?(n.removeClass("wide"),!1):void 0},initMediaUrls:function(){e.each(e(".handle_img",n),function(t,n){e(void 0).attr("src",a.path+"img/"+e(void 0).attr("data-src"))})},getData:function(){e.getJSON(a.path+"data/data.json",function(t){a.data=t,a.municipalities=[],e.each(a.data.municipalities,function(t,e){a.municipalities.push({id:t,name:e.name_fi})}),a.initAutocomplete()})},initAutocomplete:function(){var t=e(".municipality_input_init",n);t.easyAutocomplete({data:a.municipalities,getValue:"name",highlightPhrase:!0,list:{hideAnimation:{callback:function(){},time:200,type:"slide"},match:{enabled:!0},onKeyEnterEvent:function(){a.municipality_id=t.getSelectedItemData().id},maxNumberOfElements:10,onSelectItemEvent:function(){a.municipality_id=t.getSelectedItemData().id},showAnimation:{callback:function(){},time:200,type:"slide"}},placeholder:"esimerkiksi Tampere"})},calculateTax:function(t){a.meta=e('<div class="meta_container"></div>'),e("<h3>Lasketut vähennykset</h3>").appendTo(a.meta);var n=12*a.salary;e('<div class="vuositulot"><span class="label">Vuositulot</span> <span class="value">'+a.formatNr(a.roundNr(n),0)+" €</span></div>").appendTo(a.meta);var i=n,o=n>750?750:n;e('<div class="deduction"><span class="label">Tulonhankkimisvähennys</span> <span class="value">'+a.formatNr(a.roundNr(o),0)+" €</span></div>").appendTo(a.meta);var r=.0068*(i-=o)<70?0:Math.min(.0068*i,143),s=.0615*n;i-=s,e('<div class="deduction"><span class="label">Työeläkevakuutusmaksu</span> <span class="value">'+a.formatNr(a.roundNr(s),0)+" €</span></div>").appendTo(a.meta);var l=.016*n;i-=l,e('<div class="deduction"><span class="label">Työttömyysvakuutusmaksu</span> <span class="value">'+a.formatNr(a.roundNr(l),0)+" €</span></div>").appendTo(a.meta);var u=0;n>14e3&&(i-=u=.0158*n,e('<div class="deduction"><span class="label">Sairausvakuutuksen päivärahamaksu</span> <span class="value">'+a.formatNr(a.roundNr(u),0)+" €</span></div>").appendTo(a.meta));var c=i;e('<div><span class="label">Valtion verotuksen alaiset tulot</span> <span class="value">'+a.formatNr(a.roundNr(c),0)+" €</span></div>").appendTo(a.meta);var d=2412.3+.28*(n-7230);d=d>3570?3570:d,d=(d-=.045*(n-750-14e3))<0?0:d,e('<div class="deduction"><span class="label">Ansiotulovähennys</span> <span class="value">'+a.formatNr(a.roundNr(d),0)+" €</span></div>").appendTo(a.meta);var p=3060-.18*(i-d-3060);p=p<0?0:p,e('<div class="deduction"><span class="label">Perusvähennys</span> <span class="value">'+a.formatNr(a.roundNr(p),0)+" €</span></div>").appendTo(a.meta);var f=0;c>73100?f=.315*(c-73100)+10174:c>41200?f=.215*(c-41200)+3315.5:c>25300?f=.175*(c-25300)+533:c>16900&&(f=.0625*(c-16900)+8);var m=void 0;if(n>33e3){var v=.12*(c-2500);m=(v=v>1420?1420:v)-.0151*(n-750-33e3)}else m=1420;e('<div><span class="label">Enimmäisvähennys valtionverotuksessa</span> <span class="value">'+a.formatNr(a.roundNr(m),0)+" €</span></div>").appendTo(a.meta);var g=Math.max(m-f,0);f=Math.max(f-m-g,0),i=i-d-p,e('<div class="effective_income"><span class="label">Kunnallisverotuksessa verotettava tulo</span> <span class="value">'+a.formatNr(a.roundNr(i),0)+" € </span></div>").appendTo(a.meta),e('<div class="tyotulovahennys"><span class="label">Kunnallisverosta tehtävä työtulovähennys</span> <span class="value">'+a.formatNr(a.roundNr(g),0)+" €</span></div>").appendTo(a.meta);var h=Math.max(i*(t/100)-g,0);return e('<div><span class="label">Kunnallisvero</span> <span class="value">'+a.formatNr(a.roundNr(h),0)+" €</span></div>").appendTo(a.meta),e('<div><span class="label">Valtion verot</span> <span class="value">'+a.formatNr(a.roundNr(f),0)+" €</span></div>").appendTo(a.meta),e('<div><span class="label">Ylevero</span> <span class="value">'+a.formatNr(a.roundNr(r),0)+" €</span></div>").appendTo(a.meta),s+l+u+h+f+r},printResults:function(){var t=e(".result_container",n).show().empty(),i=a.calculateTax(a.data.municipalities[a.municipality_id].tax_percent);if(i<0)e("<h3>Et maksa veroja</h3>").appendTo(t),e("<p>Tulosi ovat niin alhaiset, että et maksa lainkaan veroja.</p>").appendTo(t);else{var o=12*a.salary-i;e("<h3>Maksat tuloveroja ja pakollisia maksuja "+a.formatNr(a.roundNr(i,0))+" € vuonna 2017, joten sinulle jää käteen "+a.formatNr(a.roundNr(o,0))+" €, josta maksat kulutusveroa "+a.formatNr(a.roundNr(.2*o,0))+" €.</h3>").appendTo(t);var r=a.calculateTax(a.data.municipalities[a.municipality_id].tax_percent-a.data.municipalities[a.municipality_id].tax_percent_change),s=a.meta,l=12*a.salary;i!==r?i>r?e('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class="value">'+a.formatNr(a.roundNr(i/l*100,2))+"</span>. Veroprosentti kunnassa "+a.data.municipalities[a.municipality_id].name_fi+' on <span class="value">'+a.formatNr(a.data.municipalities[a.municipality_id].tax_percent)+"</span>. Vuodelle 2017 "+a.capitalizeFirstLetter(a.municipality)+" nosti kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit "+a.formatNr(a.roundNr(r,0))+" €.</p>").appendTo(t):e('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class="value">'+a.formatNr(a.roundNr(i/l*100,2))+"</span>. Veroprosentti kunnassa "+a.data.municipalities[a.municipality_id].name_fi+' on <span class="value">'+a.formatNr(a.data.municipalities[a.municipality_id].tax_percent)+"</span>. Vuodelle 2017 "+a.capitalizeFirstLetter(a.municipality)+" laski kunnallisveroaan. Vuoden 2016 veroprosentilla maksaisit "+a.formatNr(a.roundNr(r,0))+" €.</p>").appendTo(t):e('<p>Todellinen eli efektiivinen veroprosenttisi vähennysten jälkeen on <span class="value">'+a.formatNr(a.roundNr(i/l*100,2))+"</span>. Veroprosentti kunnassa "+a.data.municipalities[a.municipality_id].name_fi+' on <span class="value">'+a.formatNr(a.data.municipalities[a.municipality_id].tax_percent)+"</span>.</p>").appendTo(t),"170"===a.municipality_id?e("<p>Maksat Suomen alhaisinta kunnallisveroa. Eniten maksaisit Savonlinnassa ja Jämijärvellä, "+a.formatNr(a.roundNr(a.calculateTax(22.5),0))+" €.</p>").appendTo(t):"740"===a.municipality_id||"181"===a.municipality_id?e("<p>Maksat Suomen korkeinta kunnallisveroa. Vähiten maksaisit Jomalassa, "+a.formatNr(a.roundNr(a.calculateTax(16.5),0))+" €.</p>").appendTo(t):e("<p>Vähiten maksaisit Ahvenanmaalla Jomalassa, "+a.formatNr(a.roundNr(a.calculateTax(16.5),0))+" €. Eniten Jämijärvellä ja Savonlinnassa, "+a.formatNr(a.roundNr(a.calculateTax(22.5),0))+" €.</p>").appendTo(t),e('<div class="more_container"><button class="more active">Näytä vähennykset</button></div>').appendTo(t),s.appendTo(t)}var u=e('<div class="neighbors_container"></div>').appendTo(t);e("<h3>Naapurikunnat</h3>").appendTo(u);var c=e("<table></table>").appendTo(u);e('<thead><tr><th>Kunta</th><th class="number">Vero-%</th><th class="number">€/12 kk</th><th class="number">Erotus</th></tr></thead>').appendTo(c);var d=e("<tbody></tbody>").appendTo(c);e.each(a.data.neighbors[a.municipality_id],function(t,n){var o=e("<tr></tr>").appendTo(d);if(a.data.municipalities[n]){e("<td>"+a.data.municipalities[n].name_fi+"</td>").appendTo(o),e('<td class="number">'+a.formatNr(a.data.municipalities[n].tax_percent)+"</td>").appendTo(o),e('<td class="number">'+a.formatNr(a.roundNr(a.calculateTax(a.data.municipalities[n].tax_percent),0))+"</td>").appendTo(o);var r=a.calculateTax(a.data.municipalities[n].tax_percent)-i;r<0?e('<td class="number">'+a.formatNr(a.roundNr(r,0))+" €</td>").appendTo(o):r>0?e('<td class="number">+'+a.formatNr(a.roundNr(r,0))+" €</td>").appendTo(o):e('<td class="number">–</td>').appendTo(o)}})},initEvents:function(){e(window).on("resize",a.getScale),n.on("click",".input_container .button",function(){a.municipality=e(".municipality_input",n).val(),a.salary=e(".salary_input",n).val(),e.each(a.data.municipalities,function(t,e){if(e.name_fi.toLowerCase()===a.municipality.toLowerCase()&&a.salary>=0)return a.municipality_id=t,a.printResults(),!1})}),n.on("click",".more_container .more",function(){"Näytä tarkemmat tiedot"===e(void 0).text()?e(void 0).text("Piilota vähennykset"):e(void 0).text("Näytä vähennykset"),e(".meta_container",n).slideToggle()})},unmount:function(){e(window).off("resize",a.getScale),void 0!==n&&n.unbind(),delete window.plusApp[a.projectName]},mount:function(){a.init(),a.isInitialized=!0},init:function(){n=e(".plus-app.plus-app-"+a.projectName),a.setPath(),a.getScale(),a.initMediaUrls(),a.initEvents(),a.getData()},meta:{version:"1.0.0"}};a.projectName="2017-10-verolaskuri",void 0===window.plusApp&&(window.plusApp={}),void 0===window.plusApp[a.projectName]&&(window.plusApp[a.projectName]=a,window.plusApp[a.projectName].mount())}(jQuery)},{"easy-autocomplete":2}],2:[function(t,e,n){var a=function(t){return t.Configuration=function(t){function e(t){return void 0!==a[t]&&null!==a[t]}function n(t,e){function n(e,a){for(var o in a)void 0===e[o]&&t.log("Property '"+o+"' does not exist in EasyAutocomplete options API."),"object"==typeof e[o]&&-1===$.inArray(o,i)&&n(e[o],a[o])}n(a,e)}var a={data:"list-required",url:"list-required",dataType:"json",listLocation:function(t){return t},xmlElementName:"",getValue:function(t){return t},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(t,e){return t=a.getValue(t),e=a.getValue(e),t<e?-1:t>e?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(t,e){return t.search(e)>-1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(t,e){return t},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},i=["ajaxSettings","template"];this.get=function(t){return a[t]},this.equals=function(t,n){return!(!e(t)||a[t]!==n)},this.checkDataUrlProperties=function(){return"list-required"!==a.url||"list-required"!==a.data},this.checkRequiredProperties=function(){for(var t in a)if("required"===a[t])return logger.error("Option "+t+" must be defined"),!1;return!0},this.printPropertiesThatDoesntExist=function(t,e){n(t,e)},function(){if("xml"===t.dataType&&(t.getValue||(t.getValue=function(t){return $(t).text()}),t.list||(t.list={}),t.list.sort||(t.list.sort={}),t.list.sort.method=function(e,n){return e=t.getValue(e),n=t.getValue(n),e<n?-1:e>n?1:0},t.list.match||(t.list.match={}),t.list.match.method=function(t,e){return t.search(e)>-1}),void 0!==t.categories&&t.categories instanceof Array){for(var e=[],n=0,i=t.categories.length;n<i;n+=1){var o=t.categories[n];for(var r in a.categories[0])void 0===o[r]&&(o[r]=a.categories[0][r]);e.push(o)}t.categories=e}}(),function(){function e(t,n){var a=t||{};for(var i in t)void 0!==n[i]&&null!==n[i]&&("object"!=typeof n[i]||n[i]instanceof Array?a[i]=n[i]:e(t[i],n[i]));return void 0!==n.data&&null!==n.data&&"object"==typeof n.data&&(a.data=n.data),a}a=e(a,t)}(),!0===a.loggerEnabled&&n(console,t),function(){void 0!==t.ajaxSettings&&"object"==typeof t.ajaxSettings?a.ajaxSettings=t.ajaxSettings:a.ajaxSettings={}}(),function(){if("list-required"!==a.url&&"function"!=typeof a.url&&(e=a.url,a.url=function(){return e}),void 0!==a.ajaxSettings.url&&"function"!=typeof a.ajaxSettings.url){var e=a.ajaxSettings.url;a.ajaxSettings.url=function(){return e}}if("string"==typeof a.listLocation){var n=a.listLocation;"XML"===a.dataType.toUpperCase()?a.listLocation=function(t){return $(t).find(n)}:a.listLocation=function(t){return t[n]}}if("string"==typeof a.getValue){var i=a.getValue;a.getValue=function(t){return t[i]}}void 0!==t.categories&&(a.categoriesAssigned=!0)}()},t}(a||{}),a=function(t){return t.Constans=function(){var t={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(e){return t[e]}},t}((a=function(t){return t.Logger=function(){this.error=function(t){void 0},this.warning=function(t){void 0}},t}(a||{}))||{}),a=function(t){return t.proccess=function(e,n,a){function i(t,n){return e.get("list").match.caseSensitive||("string"==typeof t&&(t=t.toLowerCase()),n=n.toLowerCase()),!!e.get("list").match.method(t,n)}t.proccess.match=i;var o=n.data;return o=function(t,n){var a=[];if(e.get("list").match.enabled)for(var o=0,r=t.length;o<r;o+=1)i(e.get("getValue")(t[o]),n)&&a.push(t[o]);else a=t;return a}(o,a),o=function(t){return void 0!==n.maxNumberOfElements&&t.length>n.maxNumberOfElements&&(t=t.slice(0,n.maxNumberOfElements)),t}(o),o=function(t){return e.get("list").sort.enabled&&t.sort(e.get("list").sort.method),t}(o)},t}((a=function(t){return t.ListBuilderService=function(t,e){function n(e,n){var a={};if(a="XML"===t.get("dataType").toUpperCase()?function(){var a,i={};return void 0!==e.xmlElementName&&(i.xmlElementName=e.xmlElementName),void 0!==e.listLocation?a=e.listLocation:void 0!==t.get("listLocation")&&(a=t.get("listLocation")),void 0!==a?"string"==typeof a?i.data=$(n).find(a):"function"==typeof a&&(i.data=a(n)):i.data=n,i}():function(){var t={};return void 0!==e.listLocation?"string"==typeof e.listLocation?t.data=n[e.listLocation]:"function"==typeof e.listLocation&&(t.data=e.listLocation(n)):t.data=n,t}(),void 0!==e.header&&(a.header=e.header),void 0!==e.maxNumberOfElements&&(a.maxNumberOfElements=e.maxNumberOfElements),void 0!==t.get("list").maxNumberOfElements&&(a.maxListSize=t.get("list").maxNumberOfElements),void 0!==e.getValue)if("string"==typeof e.getValue){var i=e.getValue;a.getValue=function(t){return t[i]}}else"function"==typeof e.getValue&&(a.getValue=e.getValue);else a.getValue=t.get("getValue");return a}function a(e){var n=[];return void 0===e.xmlElementName&&(e.xmlElementName=t.get("xmlElementName")),$(e.data).find(e.xmlElementName).each(function(){n.push(this)}),n}this.init=function(e){var n=[],a={};return a.data=t.get("listLocation")(e),a.getValue=t.get("getValue"),a.maxListSize=t.get("list").maxNumberOfElements,n.push(a),n},this.updateCategories=function(e,a){if(t.get("categoriesAssigned")){e=[];for(var i=0;i<t.get("categories").length;i+=1){var o=n(t.get("categories")[i],a);e.push(o)}}return e},this.convertXml=function(e){if("XML"===t.get("dataType").toUpperCase())for(var n=0;n<e.length;n+=1)e[n].data=a(e[n]);return e},this.processData=function(n,a){for(var i=0,o=n.length;i<o;i+=1)n[i].data=e(t,n[i],a);return n},this.checkIfDataExists=function(t){for(var e=0,n=t.length;e<n;e+=1)if(void 0!==t[e].data&&t[e].data instanceof Array&&t[e].data.length>0)return!0;return!1}},t}(a||{}))||{}),a=function(t){return t.main=function(e,n){function a(){0!==N.length?m.checkDataUrlProperties()?m.checkRequiredProperties()?(i(),r()):v.error("Will not work without mentioned properties."):v.error("One of options variables 'data' or 'url' must be defined."):v.error("Input field doesn't exist.")}function i(){function t(){var t=N.outerWidth();N.parent().css("width",t)}function e(t,e){return m.get("highlightPhrase")&&""!==e?a(t,e):t}function n(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function a(t,e){var a=n(e);return(t+"").replace(new RegExp("("+a+")","gi"),"<b>$1</b>")}N.parent().hasClass(f.getValue("WRAPPER_CSS_CLASS"))&&(function(){N.next("."+f.getValue("CONTAINER_CLASS")).remove()}(),function(){N.unwrap()}()),function(){var e=$("<div>"),n=f.getValue("WRAPPER_CSS_CLASS");m.get("theme")&&""!==m.get("theme")&&(n+=" eac-"+m.get("theme")),m.get("cssClasses")&&""!==m.get("cssClasses")&&(n+=" "+m.get("cssClasses")),""!==g.getTemplateClass()&&(n+=" "+g.getTemplateClass()),e.addClass(n),N.wrap(e),!0===m.get("adjustWidth")&&t()}(),function(){var t=$("<div>").addClass(f.getValue("CONTAINER_CLASS"));t.attr("id",o()).prepend($("<ul>")),function(){t.on("show.eac",function(){switch(m.get("list").showAnimation.type){case"slide":var e=m.get("list").showAnimation.time,n=m.get("list").showAnimation.callback;t.find("ul").slideDown(e,n);break;case"fade":var e=m.get("list").showAnimation.time,n=m.get("list").showAnimation.callback;t.find("ul").fadeIn(e);break;default:t.find("ul").show()}m.get("list").onShowListEvent()}).on("hide.eac",function(){switch(m.get("list").hideAnimation.type){case"slide":var e=m.get("list").hideAnimation.time,n=m.get("list").hideAnimation.callback;t.find("ul").slideUp(e,n);break;case"fade":var e=m.get("list").hideAnimation.time,n=m.get("list").hideAnimation.callback;t.find("ul").fadeOut(e,n);break;default:t.find("ul").hide()}m.get("list").onHideListEvent()}).on("selectElement.eac",function(){t.find("ul li").removeClass("selected"),t.find("ul li").eq(T).addClass("selected"),m.get("list").onSelectItemEvent()}).on("loadElements.eac",function(n,a,i){var o="",r=t.find("ul");r.empty().detach(),b=[];for(var s=0,l=0,c=a.length;l<c;l+=1){var d=a[l].data;if(0!==d.length){void 0!==a[l].header&&a[l].header.length>0&&r.append("<div class='eac-category' >"+a[l].header+"</div>");for(var p=0,f=d.length;p<f&&s<a[l].maxListSize;p+=1)o=$("<li><div class='eac-item'></div></li>"),function(){var t=p,n=s,r=a[l].getValue(d[t]);o.find(" > div").on("click",function(){N.val(r).trigger("change"),T=n,u(n),m.get("list").onClickEvent(),m.get("list").onChooseEvent()}).mouseover(function(){T=n,u(n),m.get("list").onMouseOverEvent()}).mouseout(function(){m.get("list").onMouseOutEvent()}).html(g.build(e(r,i),d[t]))}(),r.append(o),b.push(d[p]),s+=1}}t.append(r),m.get("list").onLoadEvent()})}(),N.after(t)}(),k=$("#"+o()),m.get("placeholder")&&N.attr("placeholder",m.get("placeholder"))}function o(){var t=N.attr("id");return t=f.getValue("CONTAINER_ID")+t}function r(){function t(){N.focusout(function(){var t,e=N.val();m.get("list").match.caseSensitive||(e=e.toLowerCase());for(var n=0,a=b.length;n<a;n+=1)if(t=m.get("getValue")(b[n]),m.get("list").match.caseSensitive||(t=t.toLowerCase()),t===e)return T=n,void u(T)})}function e(){N.off("keyup").keyup(function(t){function e(t){function e(t,e){return!1===m.get("matchResponseProperty")||("string"==typeof m.get("matchResponseProperty")?e[m.get("matchResponseProperty")]===t:"function"!=typeof m.get("matchResponseProperty")||m.get("matchResponseProperty")(e)===t)}if(!(t.length<m.get("minCharNumber"))){if("list-required"!==m.get("data")){var n=m.get("data"),a=h.init(n);a=h.updateCategories(a,n),c(a=h.processData(a,t),t),N.parent().find("li").length>0?s():l()}var i=function(){var t={},e=m.get("ajaxSettings")||{};for(var n in e)t[n]=e[n];return t}();void 0!==i.url&&""!==i.url||(i.url=m.get("url")),void 0!==i.dataType&&""!==i.dataType||(i.dataType=m.get("dataType")),void 0!==i.url&&"list-required"!==i.url&&(i.url=i.url(t),i.data=m.get("preparePostData")(i.data,t),$.ajax(i).done(function(n){var a=h.init(n);a=h.updateCategories(a,n),a=h.convertXml(a),e(t,n)&&c(a=h.processData(a,t),t),h.checkIfDataExists(a)&&N.parent().find("li").length>0?s():l(),m.get("ajaxCallback")()}).fail(function(){v.warning("Fail to load response data")}).always(function(){}))}}switch(t.keyCode){case 27:l(),d();break;case 38:t.preventDefault(),b.length>0&&T>0&&(T-=1,N.val(m.get("getValue")(b[T])),u(T));break;case 40:t.preventDefault(),b.length>0&&T<b.length-1&&(T+=1,N.val(m.get("getValue")(b[T])),u(T));break;default:if(t.keyCode>40||8===t.keyCode){var n=N.val();!0!==m.get("list").hideOnEmptyPhrase||8!==t.keyCode||""!==n?m.get("requestDelay")>0?(void 0!==p&&clearTimeout(p),p=setTimeout(function(){e(n)},m.get("requestDelay"))):e(n):l()}}})}function n(){N.on("keydown",function(t){if(38===(t=t||window.event).keyCode)return suppressKeypress=!0,!1}).keydown(function(t){13===t.keyCode&&T>-1&&(N.val(m.get("getValue")(b[T])),m.get("list").onKeyEnterEvent(),m.get("list").onChooseEvent(),T=-1,l(),t.preventDefault())})}function a(){N.off("keypress")}function i(){N.focus(function(){""!==N.val()&&b.length>0&&(T=-1,s())})}function o(){N.blur(function(){setTimeout(function(){T=-1,l()},250)})}function r(){N.attr("autocomplete","off")}!function(){y("autocompleteOff",!0)&&r(),t(),e(),n(),a(),i(),o()}()}function s(){k.trigger("show.eac")}function l(){k.trigger("hide.eac")}function u(t){k.trigger("selectElement.eac",t)}function c(t,e){k.trigger("loadElements.eac",[t,e])}function d(){N.trigger("blur")}var p,f=new t.Constans,m=new t.Configuration(n),v=new t.Logger,g=new t.Template(n.template),h=new t.ListBuilderService(m,t.proccess),y=m.equals,N=e,k="",b=[],T=-1;t.consts=f,this.getConstants=function(){return f},this.getConfiguration=function(){return m},this.getContainer=function(){return k},this.getSelectedItemIndex=function(){return T},this.getItems=function(){return b},this.getItemData=function(t){return b.length<t||void 0===b[t]?-1:b[t]},this.getSelectedItemData=function(){return this.getItemData(T)},this.build=function(){i()},this.init=function(){a()}},t.eacHandles=[],t.getHandle=function(e){return t.eacHandles[e]},t.inputHasId=function(t){return void 0!==$(t).attr("id")&&$(t).attr("id").length>0},t.assignRandomId=function(e){var n="";do{n="eac-"+Math.floor(1e4*Math.random())}while(0!==$("#"+n).length);elementId=t.consts.getValue("CONTAINER_ID")+n,$(e).attr("id",n)},t.setHandle=function(e,n){t.eacHandles[n]=e},t}((a=function(t){return t.Template=function(t){var e={basic:{type:"basic",method:function(t){return t},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(t){return t+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(t){return t},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(t){return t},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(t){return t},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},n=function(t){var n,a=t.fields;return"description"===t.type?(n=e.description.method,"string"==typeof a.description?n=function(t,e){return t+" - <span>"+e[a.description]+"</span>"}:"function"==typeof a.description&&(n=function(t,e){return t+" - <span>"+a.description(e)+"</span>"}),n):"iconRight"===t.type?("string"==typeof a.iconSrc?n=function(t,e){return t+"<img class='eac-icon' src='"+e[a.iconSrc]+"' />"}:"function"==typeof a.iconSrc&&(n=function(t,e){return t+"<img class='eac-icon' src='"+a.iconSrc(e)+"' />"}),n):"iconLeft"===t.type?("string"==typeof a.iconSrc?n=function(t,e){return"<img class='eac-icon' src='"+e[a.iconSrc]+"' />"+t}:"function"==typeof a.iconSrc&&(n=function(t,e){return"<img class='eac-icon' src='"+a.iconSrc(e)+"' />"+t}),n):"links"===t.type?("string"==typeof a.link?n=function(t,e){return"<a href='"+e[a.link]+"' >"+t+"</a>"}:"function"==typeof a.link&&(n=function(t,e){return"<a href='"+a.link(e)+"' >"+t+"</a>"}),n):"custom"===t.type?t.method:e.basic.method};this.getTemplateClass=function(t){var n=function(){return""};return t&&t.type&&t.type&&e[t.type]?function(){var n=e[t.type].cssClass;return function(){return n}}():n}(t),this.build=function(t){return t&&t.type&&t.type&&e[t.type]?n(t):e.basic.method}(t)},t}(a||{}))||{});!function(t){t.fn.easyAutocomplete=function(e){return this.each(function(){var n=t(this),i=new a.main(n,e);a.inputHasId(n)||a.assignRandomId(n),i.init(),a.setHandle(i,n.attr("id"))})},t.fn.getSelectedItemIndex=function(){var e=t(this).attr("id");return void 0!==e?a.getHandle(e).getSelectedItemIndex():-1},t.fn.getItems=function(){var e=t(this).attr("id");return void 0!==e?a.getHandle(e).getItems():-1},t.fn.getItemData=function(e){var n=t(this).attr("id");return void 0!==n&&e>-1?a.getHandle(n).getItemData(e):-1},t.fn.getSelectedItemData=function(){var e=t(this).attr("id");return void 0!==e?a.getHandle(e).getSelectedItemData():-1}}(jQuery)},{}]},{},[1]);})();
//# sourceMappingURL=script.min.js.map
